{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>Bienvenue sur la documentation CUB Frankfurt produite en Markdown et avec Mkdocs.</p>"},{"location":"#agence-frankfurt","title":"\ud83c\udf10 Agence FrankfurtProjet CUB \u2013 Infrastructure r\u00e9seau","text":"<p>Documentation officielle de l\u2019agence Frankfurt BTS SIO option SISR \u2013 Bloc 2 et 3</p>"},{"location":"#presentation-du-projet","title":"\ud83c\udfe2 Pr\u00e9sentation du projet","text":"<p>CUB est une entreprise fond\u00e9e en 2010, sp\u00e9cialis\u00e9e dans l\u2019incubation de startups autour de valeurs fortes de solidarit\u00e9 et de d\u00e9veloppement durable. Elle met \u00e0 disposition des professionnels des espaces collaboratifs : salles de r\u00e9union, bureaux partag\u00e9s, s\u00e9minaires et formations accessibles via une plateforme web s\u00e9curis\u00e9e.</p> <p>L\u2019entreprise dispose d\u2019un r\u00e9seau international d\u2019agences situ\u00e9es \u00e0 Paris (si\u00e8ge), Anvers, Barcelone, Hong-Kong, Los Angeles, Corse\u2026 et Frankfurt. Chaque agence b\u00e9n\u00e9ficie d\u2019une adresse IPv4 publique d\u00e9di\u00e9e issue du pr\u00e9fixe <code>192.36.0.0/16</code>, attribu\u00e9 par le RIPE NCC, et g\u00e8re son propre pare-feu local. CUB est reconnue comme un LIR (Local Internet Registry) et administre le domaine : \u27a1\ufe0f <code>cub.sioplc.fr</code></p> <p>\ud83c\udfaf Objectif de l\u2019agence Frankfurt</p> <p>D\u00e9ployer, s\u00e9curiser et documenter l\u2019infrastructure r\u00e9seau locale de l\u2019agence selon la strat\u00e9gie d\u00e9finie par la DSI de CUB, en suivant les recommandations de l\u2019ANSSI.</p>"},{"location":"#objectifs-techniques","title":"Objectifs techniques","text":"<ul> <li>Concevoir une segmentation r\u00e9seau (LAN, DMZ, VLAN d\u2019administration).  </li> <li>\u00c9tablir un plan d\u2019adressage IPv4 clair et extensible.  </li> <li>Configurer les commutateurs, pare-feux et serveurs locaux.  </li> <li>Garantir la s\u00e9curit\u00e9 et la haute disponibilit\u00e9 du r\u00e9seau.  </li> <li>Fournir une documentation technique compl\u00e8te sur GitHub Pages.</li> </ul>"},{"location":"#architecture-et-organisation","title":"\ud83e\udde9 Architecture et organisation","text":"<p>Le si\u00e8ge de Paris centralise la politique informatique de CUB et assure la coh\u00e9rence entre toutes les agences.  </p> <p></p> <p>Chaque Service Informatique de Proximit\u00e9 (SIP) \u2013 dont celui de Frankfurt \u2013 g\u00e8re :</p> <ul> <li>L\u2019assistance aux utilisateurs sur site,  </li> <li>La maintenance de l\u2019infrastructure r\u00e9seau,  </li> <li>La supervision des serveurs,  </li> <li>La mise \u00e0 jour de la documentation technique.</li> </ul>"},{"location":"#informations-reseau-agence-frankfurt","title":"\ud83d\udda5\ufe0f Informations r\u00e9seau \u2013 Agence Frankfurt","text":"\u00c9l\u00e9ment Adresse / VLAN Description LAN Frankfurt <code>192.168.6.0/24</code> R\u00e9seau interne DMZ Frankfurt <code>192.36.6.0/24</code> Services accessibles depuis l\u2019ext\u00e9rieur VLAN Administration <code>192.168.66.192/28</code> Gestion et supervision Pare-feu (FW6) <code>192.168.66.254 / 192.36.6.254 / 192.36.253.60</code> S\u00e9curit\u00e9 et routage WAN <code>192.36.253.0/24</code> Interconnexion inter-agences"},{"location":"#description-des-services-agence-frankfurt","title":"\ud83d\uddc2\ufe0f Description des services \u2013 Agence Frankfurt","text":"Intitul\u00e9 des services Description VLAN Nombre d\u2019h\u00f4tes par service Production R\u00e9seau principal d\u00e9di\u00e9 aux services m\u00e9tiers. VLAN 5X 60 h\u00f4tes Client 1 R\u00e9seau r\u00e9serv\u00e9 aux postes clients internes. VLAN 10 16 h\u00f4tes Administration syst\u00e8mes &amp; r\u00e9seaux R\u00e9seau d\u2019administration pour la gestion des \u00e9quipements et serveurs. VLAN 20 3 h\u00f4tes <p>Remarque : L\u2019\u00e9volution du r\u00e9seau est un \u00e9l\u00e9ment primordial. Le plan d\u2019adressage doit permettre d\u2019accueillir au moins le double d\u2019\u00e9quipements par rapport au recensement initial afin d\u2019\u00e9viter toute saturation future.</p>"},{"location":"#structure-de-la-documentation","title":"\ud83e\udded Structure de la documentation","text":"<ul> <li>Phase d\u2019analyse et de maquettage   \u00c9tude du r\u00e9seau actuel, d\u00e9finition des besoins, conception logique et physique.</li> <li>Phase de prototypage et mise en \u0153uvre   Configuration des \u00e9quipements et d\u00e9ploiement de la solution.</li> <li>Phase de validation (recette)   Tests de conformit\u00e9, s\u00e9curit\u00e9 et performance.</li> <li>Documentation finale   Proc\u00e9dures, sch\u00e9mas, et configurations valid\u00e9es.</li> </ul> Projet r\u00e9alis\u00e9 par l\u2019agence Frankfurt \u2013 BTS SIO SISR Esteban TOUZET"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/","title":"Situation 1 - Pr\u00e9paration de la maquette et premiers param\u00e9trages du serveur Windows2019","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#adressage","title":"Adressage","text":"Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#schema-logique-agence-frankfur","title":"Sch\u00e9ma logique \u2013 Agence Frankfur","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert    <p>Source</p> <p>https://www.it-connect.fr/installer-et-configurer-openssh-server-sur-windows-server-2019/</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#1-sysprep","title":"1. Sysprep :","text":"<p>Sysprep est l\u2019outil de pr\u00e9paration syst\u00e8me de Windows. Il permet de pr\u00e9parer une machine qui va servir de \u00ab master \u00bb, en vue d\u2019un futur d\u00e9ploiement.</p> <p>Cet utilitaire se trouve dans <code>C:\\Windows\\System32\\Sysprep</code>.</p> <p></p> <p>Double cliquez sur \u00ab sysprep \u00bb</p> <p></p> <p>Quand tout ce passe bien, il vous affiche cette petite fen\u00eatre qui reste ouverte plusieurs minutes :</p> <p></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#2-comparaison-sid","title":"2. Comparaison SID","text":"<p>Ouvrez l'invite de commande en tant qu'administrateur. Tapez la commande suivante pour voir votre SID d'utilisateur actuel.</p> <p><pre><code>whoami /user\n</code></pre> </p> <p></p> <p>Mon SID : S-1-5-21-1430976166-1236960807-3649249825-500 SID de mon camarade : 5-1-5-21-324986168-2068038747-1270508929-500</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#3-changement-dadresse","title":"3. Changement d\u2019adresse","text":"<p>Afin d\u2019\u00eatre conforme aux r\u00e8gles en vigueur sur les adressages, je change mon adresse IP, mon masque ainsi que ma passerelle.</p> <p></p> <p></p> <p><pre><code>ipconfig\n</code></pre> </p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#31-acces-poste-client-pare-feu","title":"3.1 Acc\u00e8s poste client - Pare-feu","text":"<p>Autorisation des postes clients : autoriser les requetes icmp </p> <ol> <li>Dans le volet gauche, clique sur R\u00e8gles de trafic entrant.</li> <li>Dans le volet droit, clique sur Nouvelle r\u00e8gle\u2026.</li> <li>Choisis Personnalis\u00e9e puis Suivant.</li> <li>Dans Programme, laisse \"Tous les programmes\" \u2192 Suivant.</li> <li>Dans Protocole et ports : <ul> <li>Dans Type de protocole, s\u00e9lectionne ICMPv4</li> <li>Il est \u00e9galement possible aussi de choisir ICMPv6 si n\u00e9cessaire. </li> </ul> </li> <li>Clique sur Suivant jusqu\u2019\u00e0 Action \u2192 choisis Autoriser la connexion.</li> <li>S\u00e9lectionne les profils (Domaine, Priv\u00e9, Public) selon le besoin. G\u00e9n\u00e9ralement Priv\u00e9 + Domaine suffisent.</li> <li>Donne un nom \u00e0 la r\u00e8gle (ex : Autoriser ICMP Ping) \u2192 Terminer.</li> </ol>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#4-installer-openssh-server-sur-windows","title":"4. Installer OpenSSH<sup>1</sup> Server sur Windows","text":"<p>A partir d'une console PowerShell ouverte en tant qu'administrateur, la commande suivante permet l'installation :</p> <pre><code>Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0\n</code></pre> <p></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#5-configurer-openssh-server-sur-windows","title":"5. Configurer OpenSSH Server sur Windows","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#51-demarrage-automatique-du-serveur-openssh","title":"5.1 D\u00e9marrage automatique du serveur OpenSSH","text":"<p>Pour commencer la configuration, nous allons d\u00e9marrer le serveur OpenSSH d'une part, et d'autre part nous allons le configurer en d\u00e9marrage automatique.</p> <p>Plut\u00f4t que le faire \u00e0 partir de la console \"Services\", je vous propose d'ex\u00e9cuter deux commandes PowerShell, ce sera plus efficace. Voici l'\u00e9tat actuel du service \"OpenSSH SSH Server\" :</p> <p></p> <p>Pour d\u00e9marrer le service \"sshd\" correspondant \u00e0 \"OpenSSH SSH Server\", on va utiliser la commande suivante :</p> <pre><code>Start-Service -Name \"sshd\"\n</code></pre> <p>Ensuite, pour le modifier et d\u00e9finir le mode de d\u00e9marrage sur \"Automatique\" au lieu de \"Manuel\" :</p> <p><pre><code>Set-Service -Name \"sshd\" -StartupType Automatic\n</code></pre> La commande ci-dessous vous permettra de v\u00e9rifier qu'il est bien en cours d'ex\u00e9cution.</p> <p><pre><code>Get-Service -Name \"sshd\"\n</code></pre> </p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#52-configuration-dopenssh-server-sur-windows","title":"5.2 Configuration d'OpenSSH Server sur Windows","text":"<p>Sur Windows, la configuration d'OpenSSH est stock\u00e9e \u00e0 l'emplacement ci-dessous o\u00f9 l'on va trouver le fichier sshd_config :</p> <pre><code>%programdata%\\ssh\\\n</code></pre> <p>Au sein du fichier sshd_config, nous allons retrouver les options classiques d'OpenSSH. Nous pouvons le configurer de la m\u00eame fa\u00e7on qu'on le ferai la configuration SSH sous Linux.</p> <p>Attention tout de m\u00eame</p> <p>\u00c0 ce jour, il y a des options non support\u00e9es comme les options X11. La liste compl\u00e8te des options non support\u00e9es est disponible sur le site Microsoft : OpenSSH - Options non support\u00e9es</p> <p>Modifier le port d'\u00e9coute SSH</p> <p>Pour modifier le port d'\u00e9coute par d\u00e9faut (recommand\u00e9) et utiliser un autre port que le n\u00b022, il faut modifier l'option \"Port\". Pour modifier le fichier de configuration, vous devez ouvrir l'\u00e9diteur de texte en tant qu'administrateur pour avoir le droit d'enregistrer le fichier.</p> <p>Ensuite, il faut d\u00e9commenter la ligne \"<code>#Port 22</code>\" et changer le num\u00e9ro de port, comme ceci :</p> <p></p> <p>Apr\u00e8s chaque modification de la config, il est indispensable de red\u00e9marrer le service SSH pour charger les nouveaux param\u00e8tres. PowerShell permet de le faire facilement :</p> <pre><code>Restart-Service \"sshd\"\n</code></pre> <p>A la suite de la modification du port, si la connexion SSH ne fonctionne pas, regardez du c\u00f4t\u00e9 du pare-feu Windows. En effet, lors de l'installation d'OpenSSH Server, une r\u00e8gle est cr\u00e9\u00e9e pour autoriser les connexions sur le port 22.</p> <p>Voici la commande pour cr\u00e9er une r\u00e8gle de pare-feu qui autorise les connexions entrantes sur le port 222 :</p> <pre><code>New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH Server (sshd) - Port 222' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 222\n</code></pre> <p>Information sur le contexte</p> <p>Auparavant, j\u2019ai cr\u00e9\u00e9 un utilisateur \u00ab adminssh \u00bb afin d\u2019utiliser celui-ci \u00e0 la connexion SSH.</p> <p>Dans le fichier de configuration, il faut commenter les deux lignes suivantes, sinon la directive DenyGroups ne fonctionne pas :</p> <p><pre><code># Match Group administrators\n\n# AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys\n</code></pre> A la suite, ajoutez la ligne suivante :</p> <pre><code>DenyGroups administrateurs\n</code></pre> <p>Red\u00e9marrez le service SSH et tentez de vous connecter \u00e0 votre serveur avec un compte administrateur : l'acc\u00e8s doit \u00eatre refus\u00e9 !</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#53-connexion-en-ssh","title":"5.3 Connexion en ssh :","text":"<pre><code>ssh adminssh@172.16.56.2 -p -222\n</code></pre>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#6-installation-du-bureau-a-distance-protocole-rdp","title":"6. Installation du bureau \u00e0 distance \u2013 Protocole RDP","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-1/#61-activer-le-bureau-a-distance-sous-windows-server","title":"6.1 Activer le Bureau \u00e0 distance sous Windows Server :","text":"<p>Dans le <code>Gestionnaire de serveur &gt; Serveur local</code>, le param\u00e8tre Bureau \u00e0 distance permet d\u2019activer RDP. Par d\u00e9faut d\u00e9sactiv\u00e9, il emp\u00eache les connexions entrantes, mais le serveur peut toujours se connecter en RDP \u00e0 une autre machine.</p> <p></p> <p>En cliquant sur Activ\u00e9 ou D\u00e9sactiv\u00e9, on ouvre l\u2019interface de configuration du Bureau \u00e0 distance. Pour autoriser les connexions, il faut cocher Autoriser les connexions \u00e0 distance \u00e0 cet ordinateur.</p> <p></p> <p>Activer le Bureau \u00e0 distance sous Windows Server : <code>Param\u00e8tres \u2192 Syst\u00e8me \u2192 Bureau \u00e0 distance \u2192</code> <code>Activer</code>. </p> <p>Ouvrir le bureau \u00e0 distance :</p> <p></p> <p>Test de la connexion RDP pour le compte \u201cadminssh\u201d : Le type de compte adminssh a \u00e9t\u00e9 modifi\u00e9, car par d\u00e9faut il est en utilisateur standard. Pour permettre l\u2019acc\u00e8s en RDP, il doit \u00eatre configur\u00e9 en compte administrateur.</p> <p></p> <p></p> <p>Entrer votre identifiant et mot de passe : </p> <p></p> <ol> <li> <p>OpenSSH Server (Open Secure Shell) est un service qui permet d'\u00e9tablir une connexion s\u00e9curis\u00e9e entre un client et un serveur via le protocole SSH (Secure Shell). Il offre un canal chiffr\u00e9 pour ex\u00e9cuter des commandes \u00e0 distance, transf\u00e9rer des fichiers (via <code>scp</code> ou <code>sftp</code>), et administrer des syst\u00e8mes sans risquer l\u2019interception des donn\u00e9es.  Sous Windows, il peut \u00eatre install\u00e9 comme fonctionnalit\u00e9 facultative (\u00ab Fonctionnalit\u00e9s Windows \u00bb) et fonctionne en tant que service Windows, \u00e9coutant par d\u00e9faut sur le port 22 pour autoriser les connexions SSH entrantes.  Sous Linux, il est g\u00e9n\u00e9ralement fourni par le paquet <code>openssh-server</code>, qui \u00e9coute sur le port 22 par d\u00e9faut et autorise les connexions SSH entrantes.\u00a0\u21a9</p> </li> </ol>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/","title":"Situation 2 - Mise en place et d\u00e9couverte d\u2019un environnement de d\u00e9veloppement GIT","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/#adressage","title":"Adressage","text":"Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/#schema-logique-agence-frankfur","title":"Sch\u00e9ma logique \u2013 Agence Frankfur","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/#partie-1-installation-de-lenvironnement-git","title":"Partie 1 \u2013 Installation de l\u2019environnement GIT","text":"<ol> <li>Installer la version Windows de Git sur votre serveur (Git Bash, Git GUI, Git CMD)</li> <li>Aller dans Git Bash et tester une premi\u00e8re commande \u00ab git version \u00bb</li> <li>Cr\u00e9er un dossier par le Git Bash sur la racine de votre disque locale que vous nommez \u00ab git_cub \u00bb. Celui-ci contiendra l\u2019ensemble de vos d\u00e9p\u00f4ts (ou Repositories en anglais)</li> </ol>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/#partie-2-initialisation-de-lenvironnement-git","title":"Partie 2 - Initialisation de l\u2019environnement Git<sup>1</sup> :","text":"<p>Question 5 : Pr\u00e9parer la configuration initiale de Git en local qui sera conserv\u00e9e pour tous vos projets :</p> <p></p> <p>Question 6 : Initialiser l'environnement Git local pour un d\u00e9p\u00f4t (r\u00e9positorie) :</p> <p> </p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/#partie-3-gerer-les-versions-commits-en-local","title":"Partie 3 \u2013 G\u00e9rer les versions (commits) en local","text":"<p>Question 7 : Cr\u00e9er le premier <code>scripto.bat</code> en batch \u00e0 d\u00e9poser dans le dossier <code>premierdepot</code></p> <pre><code>nano script0\n</code></pre> <p></p> <p>Question 8 : Valider la premi\u00e8re version du script dans une zone tampon (index) : <code>git add .</code> ou <code>git add --patch script0.bat</code></p> <pre><code>git add .\n</code></pre> <p></p> <p>Question 9 : V\u00e9rifier le status de votre d\u00e9p\u00f4t : <code>git status</code></p> <pre><code>git status\n</code></pre> <p></p> <p>Question 10 : R\u00e9aliser la premi\u00e8re version (commit) de votre d\u00e9p\u00f4t : <code>git commit -m \u00ab mon premier commit \u00bb</code></p> <pre><code>git commit -m \u00ab mon premier commit \u00bb\n</code></pre> <p></p> <p>Question 11 : V\u00e9rifier le status \u00e0 nouveau de votre d\u00e9p\u00f4t : <code>git status</code></p> <pre><code>git status\n</code></pre> <p></p> <p>Question 12 : Lister les versions (commits) de votre d\u00e9p\u00f4t : <code>git log</code></p> <pre><code>git log\n</code></pre> <p></p> <p>Question 13 : R\u00e9aliser et enregistrer une modification du script :</p> <p><pre><code>nano script0\n</code></pre> </p> <p>Question 14 : Valider la deuxi\u00e8me version du script : <code>git add .</code> ou <code>git add --patch script0.bat</code></p> <pre><code>git add .\n</code></pre> <p></p> <p>Question 15 : V\u00e9rifier le status de votre d\u00e9p\u00f4t : <code>git status</code></p> <pre><code>git status\n</code></pre> <p></p> <p>Question 16 : R\u00e9aliser la deuxi\u00e8me version (commit) de votre d\u00e9p\u00f4t : <code>git commit -m \u00ab mon deuxi\u00e8me commit \u00bb</code></p> <pre><code>git commit -m \u00ab mon deuxi\u00e8me commit \u00bb\n</code></pre> <p></p> <p>Question 17 : V\u00e9rifier le status \u00e0 nouveau de votre d\u00e9p\u00f4t : <code>git status</code></p> <pre><code>git status\n</code></pre> <p></p> <p>Question 18 : Lister les versions (commits) de votre d\u00e9p\u00f4t : <code>git log</code></p> <pre><code>git log\n</code></pre> <p></p> <p>Question 19 : Revenir \u00e0 la premi\u00e8re version du script : <code>git log \u2013oneline</code>, puis <code>git checkout ab389bb</code> (\u00e0 adapter en fonction de vos logs)</p> <p><pre><code>git log \u2013oneline\n</code></pre> <pre><code>git checkout ab389bb\n</code></pre></p> <p> </p> <p>Question 20 : V\u00e9rifier que le contenu du script correspond bien \u00e0 votre premi\u00e8re version</p> <p></p> <p>Question 21 : Revenir \u00e0 la derni\u00e8re version du script : <code>git checkout master</code></p> <pre><code>git checkout master\n</code></pre> <p></p> <p>Question 22 : Lister les versions (commits) de votre d\u00e9p\u00f4t : <code>git log</code></p> <pre><code>git log\n</code></pre> <p></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/#partie-4-gerer-les-depots-github-a-distance","title":"Partie 4 \u2013 G\u00e9rer les d\u00e9p\u00f4ts GitHub \u00e0 distance","text":"<p>Question 23 : Revenir sur votre compte GitHub et cr\u00e9er un nouveau d\u00e9p\u00f4t <code>\u00ab premierd\u00e9potgithub \u00bb</code></p> <p>Sur GitHub, cliquez sur New repository et nomme-le \"premierdepotgithub\"</p> <p>Url : https://github.com/estebantouzet/premierdepotgithub.git</p> <p>Question 24 : Cloner ce nouveau d\u00e9p\u00f4t vers votre machine en local dans le dossier \u00ab git_cub \u00bb : <code>git clone lien https de github pour le d\u00e9p\u00f4t</code></p> <pre><code>git clone https://github.com/estebantouzet/premierdepotgithub.git\n</code></pre> <p></p> <p>Question 25 : V\u00e9rifier le contenu du nouveau dossier sur votre machine \u00ab <code>premierd\u00e9potgithub</code> \u00bb</p> <pre><code>cd premierdepot\nls\n</code></pre> <p></p> <p>Question 26 : Copier le <code>script0.bat</code> vers ce nouveau dossier</p> <pre><code>git clone https://github.com/EstebanTOUZET/premierdepotgithub.git\n</code></pre> <p></p> <p>Question 27 : V\u00e9rifier le status \u00e0 nouveau de votre d\u00e9p\u00f4t : <code>git status</code></p> <pre><code>git status\n</code></pre> <p></p> <p>Question 28 : R\u00e9aliser la premi\u00e8re version (commit) de votre d\u00e9p\u00f4t : <code>git commit -m \u00ab mon deuxi\u00e8me commit sur github \u00bb</code></p> <pre><code>git commit -m \u00ab mon deuxi\u00e8me commit sur github \u00bb\n</code></pre> <p></p> <p>Question 29 : V\u00e9rifier le status \u00e0 nouveau de votre d\u00e9p\u00f4t : <code>git status</code></p> <pre><code>git status\n</code></pre> <p></p> <p>Question 30 : Pousser et valider le contenu de votre d\u00e9p\u00f4t local vers le d\u00e9p\u00f4t distant : <code>git push -u origin main</code></p> <pre><code>git push -u origin main\n</code></pre> <p> </p> <p>Question 31 : R\u00e9aliser la deuxi\u00e8me version (commit) de votre d\u00e9p\u00f4t : <code>git commit-m \u00ab mon deuxi\u00e8me commit sur github \u00bb</code></p> <pre><code>git commit-m \u00ab mon deuxi\u00e8me commit sur github \u00bb\n</code></pre> <p></p> <p>Question 32 : V\u00e9rifier le status \u00e0 nouveau de votre d\u00e9p\u00f4t : <code>git status</code></p> <pre><code>git status\n</code></pre> <p></p> <p>Question 33 : Pousser et valider le contenu de votre d\u00e9p\u00f4t local vers le d\u00e9p\u00f4t distant : <code>git push -u origin main</code></p> <pre><code>git push -u origin main\n</code></pre> <p></p> <p>Question 34 : V\u00e9rifier le contenu de votre d\u00e9p\u00f4t distant sur le site de github</p> <p></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-2/#annexe","title":"Annexe","text":"<ol> <li> <p>Un environnement Git d\u00e9signe l\u2019ensemble des outils, configurations et d\u00e9p\u00f4ts permettant de g\u00e9rer le versionnement du code ou des fichiers \u00e0 l\u2019aide de Git.  Il comprend g\u00e9n\u00e9ralement un d\u00e9p\u00f4t local (sur la machine de l\u2019utilisateur) et un d\u00e9p\u00f4t distant (h\u00e9berg\u00e9 sur une plateforme comme GitHub, GitLab ou Bitbucket). Cet environnement permet de suivre l\u2019historique des modifications, de collaborer avec d\u2019autres utilisateurs, de revenir \u00e0 des versions pr\u00e9c\u00e9dentes et de g\u00e9rer diff\u00e9rentes branches d\u2019un projet. Sous Windows, il peut \u00eatre configur\u00e9 via Git Bash ou un client graphique comme GitHub Desktop, tout en s\u2019appuyant sur OpenSSH pour les connexions s\u00e9curis\u00e9es.\u00a0\u21a9</p> </li> </ol>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/","title":"Situation 3 - Introduction au PowerShell","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#adressage","title":"Adressage","text":"Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#schema-logique-agence-frankfur","title":"Sch\u00e9ma logique \u2013 Agence Frankfur","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#1-reponse-aux-questions-de-la-situation-intoduction-au-powershell","title":"1. R\u00e9ponse aux questions de la situation - Intoduction au PowerShell<sup>1</sup> :","text":"La sensiblit\u00e9 \u00e0 la casse de PowerShell  <p>PowerShell n\u2019est pas sensible \u00e0 la casse par d\u00e9faut : variables, cmdlets et param\u00e8tres fonctionnent quelle que soit la casse. Pour les comparaisons de cha\u00eenes, certains op\u00e9rateurs sont insensibles (-eq, -like) et d\u2019autres sensibles (-ceq, -clike).  En clair, les majuscules et/ou minuscule auront aucune incidence sur vos commandes !</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#11-connectez-vous-en-ssh-puis-executer-et-verifier-la-version-de-powershell","title":"1.1 Connectez-vous en SSH puis ex\u00e9cuter et v\u00e9rifier la version de Powershell","text":"<pre><code>ssh adminssh@192.168.6.2 -p 222\n</code></pre> <p>Une fois connecter en ssh, il faut se mettre en Powershell : </p> <p><pre><code>powershell\n</code></pre> <pre><code>$PSVersionTable\n</code></pre></p> <p></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#12-comment-visualiser-sur-votre-terminal-que-powershell-est-bien-executer","title":"1.2 Comment visualiser sur votre terminal que Powershell est bien ex\u00e9cuter","text":"<p>Si vous visualiser \"<code>PS</code>\" comme sur l\u2019image ci-dessous, alors vous \u00eates en PowerShell :</p> <p></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#13-afficher-lensemble-des-alias-contenus-dans-powershell","title":"1.3 Afficher l\u2019ensemble des alias contenus dans PowerShell","text":"<p><pre><code>get-alias\n</code></pre>  ...</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#14-afficher-laide-pour-lutilisation-de-la-commande-clear-host","title":"1.4 Afficher l\u2019aide pour l\u2019utilisation de la commande <code>clear \u2013host</code>","text":"<p><pre><code>get-help clear\n</code></pre> </p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#15-quels-sont-les-trois-types-de-commande-pouvons-nous-retrouver-dans-les-commandes-disponibles-de-powershell","title":"1.5 Quels sont les trois types de commande pouvons-nous retrouver dans les commandes disponibles de PowerShell","text":"<p>Commande : get-command 1. Alias 2. Function 3. Cmdlet</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#16-tester-la-commande-get-history-quel-est-linteret-dutiliser-cette-commande","title":"1.6 Tester la commande <code>Get-History</code>, quel est l\u2019int\u00e9r\u00eat d\u2019utiliser cette commande ?","text":"<p>La commande Get-History affiche la liste des commandes ex\u00e9cut\u00e9es dans la session PowerShell.</p> <p>Elle permet de retrouver, r\u00e9utiliser ou analyser les commandes pr\u00e9c\u00e9dentes, ce qui fait gagner du temps et facilite le suivi du travail effectu\u00e9.</p> <pre><code>Get-History\n</code></pre> <p></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#17-afficher-la-liste-des-processus-en-cours-dexecution-sur-le-serveur-windows2019","title":"1.7 Afficher la liste des processus en cours d\u2019ex\u00e9cution sur le serveur Windows2019.","text":"<pre><code>get-process\n</code></pre>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#18-retrouver-les-commandes-permettant-dafficher-page-par-page-la-liste-des-commandes-disponible-sur-powershell","title":"1.8 Retrouver les commandes permettant d\u2019afficher page par page la liste des commandes disponible sur PowerShell","text":"<pre><code>get-command | out-host -paging\n</code></pre>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#19-retrouver-et-tester-les-commandes-permettant-de-lister-de-demarrer-et-darreter-les-services","title":"1.9 Retrouver et tester les commandes permettant de lister, de d\u00e9marrer et d\u2019arr\u00eater les services.","text":"<p>Lister le service \"<code>Spooler</code>\" : <pre><code>get-service -Name \"Spooler\"\n</code></pre> </p> <p>D\u00e9marrer le service \"<code>wuauserv</code>\" : <pre><code>Start-Service -Name \"wuauserv\"\n</code></pre> </p> <p>Arr\u00eater le service \"wuauserv\" : <pre><code>stop-service \u2013name \"wuauserv\"\n</code></pre></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#110-creer-en-ligne-de-commande-le-dossier-procedures","title":"1.10 Cr\u00e9er en ligne de commande le dossier \u00ab <code>proc\u00e9dures</code> \u00bb","text":"<pre><code>new-item -name \"procedures\" -ItemType directory\n</code></pre>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#111-creer-avec-une-commande-powershell-un-fichier-nomme-liste-des-procedurestxt","title":"1.11 Cr\u00e9er avec une commande PowerShell un fichier nomm\u00e9 \u00ab liste des proc\u00e9dures.txt \u00bb","text":"<p><pre><code>cd procedures\nnew-item -name \"liste des procedures.txt\" -ItemType directory\n</code></pre> </p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#112-ajouter-les-deux-lignes-suivantes-dans-le-fichier-nomme-listeprocedurestxt","title":"1.12 Ajouter les deux lignes suivantes dans le fichier nomm\u00e9 \u00ab <code>ListeProc\u00e9dures.txt</code> \u00bb","text":"<ol> <li>Administration \u00e0 distance s\u00e9curis\u00e9e</li> <li>Commandes Powershell</li> </ol> <pre><code>Add-Content -Path \".\\ListeProc\u00e9dures.txt\" -Value \"Administration \u00e0 distance s\u00e9curis\u00e9e\"\nAdd-Content -Path \".\\ListeProc\u00e9dures.txt\" -Value \"Commandes Powershell\"\n</code></pre>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Situation-3/#113-realiser-une-copie-du-fichier-listeprocedurestxt-vers-un-nouveau-fichier-de-sauvegarde-nomme-listeproceduressauvegardetxt","title":"1.13 R\u00e9aliser une copie du fichier \u00ab <code>ListeProc\u00e9dures.txt</code> \u00bb vers un nouveau fichier de sauvegarde nomm\u00e9 \u00ab <code>ListeProc\u00e9duresSauvegarde.txt</code> \u00bb","text":"<pre><code>Copy-Item -Path \".\\ListeProc\u00e9dures.txt\" -Destination \".\\ListeProc\u00e9duresSauvegarde.txt\"\n</code></pre> <ol> <li> <p>Windows PowerShell est un interpr\u00e9teur de ligne de commande Windows sp\u00e9cialement con\u00e7u pour les administrateurs syst\u00e8me. Windows PowerShell inclut une invite interactive et un environnement de script utilisables ind\u00e9pendamment ou conjointement.  Windows PowerShell introduit le concept d'applet de commande, outil en ligne de commande simple, \u00e0 fonction unique, int\u00e9gr\u00e9 dans l'interpr\u00e9teur de commandes. Vous pouvez utiliser chaque applet de commande s\u00e9par\u00e9ment, mais la puissance de ces outils simples s'exprime pleinement quand vous les combinez pour effectuer des t\u00e2ches complexes. Windows PowerShell inclut plus d'une centaine d'applets de commande de base.\u00a0\u21a9</p> </li> </ol>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/","title":"Fiche proc\u00e9dure \u2013 G\u00e9rer les Droits des utilisateurs sur un dossier","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/#1-voir-les-permissions-actuelles-dun-dossier","title":"1. Voir les permissions actuelles d\u2019un dossier","text":"<pre><code>$folder = \"C:\\TestPerms\"\nGet-Acl -Path $folder | Format-List -Property Path, Owner, Access\n</code></pre> <p><code>Access</code> liste les r\u00e8gles (qui a quoi : Read, Modify, FullControl...).</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/#2-ajouter-des-droits-a-un-utilisateur-exemples","title":"2. Ajouter des droits \u00e0 un utilisateur (exemples)","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/#exemple-a-donner-fullcontrol-controle-total-a-mondomainejdupont","title":"Exemple A \u2014 Donner FullControl (contr\u00f4le total) \u00e0 <code>MONDOMAINE\\jdupont</code>","text":"<pre><code>$folder = \"C:\\TestPerms\"\n$acl = Get-Acl -Path $folder\n\n$rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\n    \"MONDOMAINE\\jdupont\",            # nom d'utilisateur ou groupe\n    \"FullControl\",                   # droits (FullControl, Modify, ReadAndExecute, Read, Write)\n    \"ContainerInherit, ObjectInherit\", # h\u00e9ritage : dossiers + fichiers\n    \"None\",                          # propagation\n    \"Allow\"                          # type : Allow ou Deny\n)\n\n$acl.AddAccessRule($rule)\nSet-Acl -Path $folder -AclObject $acl\n</code></pre> <p>Remplace <code>MONDOMAINE\\jdupont</code> <code>par MACHINE\\user</code> pour un utilisateur local (ex: <code>.\\jdupont</code>) ou <code>jdupont</code> si appropri\u00e9.</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/#exemple-b-donner-readandexecute-lectureexecution","title":"Exemple B \u2014 Donner ReadAndExecute (lecture/ex\u00e9cution)","text":"<pre><code># m\u00eames variables $folder et $acl que ci-dessus\n$rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"MONDOMAINE\\jdupont\",\"ReadAndExecute\",\"ContainerInherit, ObjectInherit\",\"None\",\"Allow\")\n$acl.AddAccessRule($rule)\nSet-Acl -Path $folder -AclObject $acl\n</code></pre>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/#3-supprimer-des-droits-dun-utilisateur","title":"3. Supprimer des droits d\u2019un utilisateur","text":"<p>Attention</p> <p>La suppression via objet n\u00e9cessite de reconstruire la r\u00e8gle exacte (m\u00eame flags). Si \u00e7a ne fonctionne pas, utiliser icacls (voir plus bas).</p> <pre><code>$folder = \"C:\\TestPerms\"\n$acl = Get-Acl -Path $folder\n\n$rule = New-Object System.Security.AccessControl.FileSystemAccessRule(\"MONDOMAINE\\jdupont\",\"FullControl\",\"ContainerInherit, ObjectInherit\",\"None\",\"Allow\")\n\n# Retire la r\u00e8gle correspondante\n$removed = $acl.RemoveAccessRule($rule)\n\n# Applique\nSet-Acl -Path $folder -AclObject $acl\n</code></pre> <p>Si <code>RemoveAccessRule</code> ne supprime pas (cas fr\u00e9quent si la r\u00e8gle n'est pas strictement identique), utilise <code>icacls</code> :</p> <p>Avec icacls (plus simple pour supprimer toutes les permissions d\u2019un user) :</p> <pre><code>icacls \"C:\\TestPerms\" /remove \"MONDOMAINE\\jdupont\"\n</code></pre>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/#4-sauvegarder-et-restaurer-les-acl-tres-utile-avant-les-changements","title":"4. Sauvegarder et restaurer les ACL (tr\u00e8s utile avant les changements)","text":"<p>Sauvegarder</p> <pre><code>Get-Acl -Path \"C:\\TestPerms\" | Export-Clixml -Path \"C:\\Sauvegarde\\TestPerms_ACL.xml\"\n</code></pre> <p>Restaurer</p> <pre><code>$acl = Import-Clixml -Path \"C:\\Sauvegarde\\TestPerms_ACL.xml\"\nSet-Acl -Path \"C:\\TestPerms\" -AclObject $acl\n</code></pre> <p><code>Export-Clixml</code>/<code>Import-Clixml</code> pr\u00e9servent la structure de l\u2019ACL.</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/#5-verifier-le-resultat","title":"5. V\u00e9rifier le r\u00e9sultat","text":"<p><pre><code>Get-Acl -Path \"C:\\TestPerms\" | Format-List -Property Access\n</code></pre> V\u00e9rifie que l\u2019utilisateur appara\u00eet avec le bon droit (FullControl, Modify, etc.).</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/#6-alternative-rapide-icacls-utile-et-simple","title":"6. Alternative rapide : icacls (utile et simple)","text":"<p>Donner Modify (modifier) :  <pre><code>icacls \"C:\\TestPerms\" /grant \"MONDOMAINE\\jdupont:(OI)(CI)M\"\n</code></pre></p> <p>Supprimer l\u2019utilisateur : <pre><code>icacls \"C:\\TestPerms\" /remove \"MONDOMAINE\\jdupont\"\n</code></pre></p> <p>Explication rapide des flags :</p> <ul> <li><code>(OI)</code> = Object Inherit (h\u00e9rite aux fichiers)</li> <li><code>(CI)</code> = Container Inherit (h\u00e9rite aux sous-dossiers)</li> <li><code>M</code> = Modify, <code>F</code> = Full, <code>RX</code> = Read &amp; Execute, <code>R</code> = Read, <code>W</code> = Write</li> </ul>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/PowerShell-Situation-3/#8-mini-scenario-complet-execute-sur-un-dossier-test","title":"8. Mini-sc\u00e9nario complet (ex\u00e9cut\u00e9 sur un dossier test)","text":"<pre><code># Variables\n$folder = \"C:\\TestPerms\"\n$user   = \"MONDOMAINE\\jdupont\"\n\n# 1) Sauvegarde ACL\nGet-Acl -Path $folder | Export-Clixml -Path \"$env:USERPROFILE\\Desktop\\TestPerms_ACL_backup.xml\"\n\n# 2) Ajouter le droit Lecture/Ex\u00e9cution\n$acl = Get-Acl -Path $folder\n$rule = New-Object System.Security.AccessControl.FileSystemAccessRule($user,\"ReadAndExecute\",\"ContainerInherit, ObjectInherit\",\"None\",\"Allow\")\n$acl.AddAccessRule($rule)\nSet-Acl -Path $folder -AclObject $acl\n\n# 3) V\u00e9rifier\nGet-Acl -Path $folder | Format-List -Property Access\n</code></pre>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/RDP-Situation-1/","title":"Fiche proc\u00e9dure protocole RDP","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/RDP-Situation-1/#installation-du-bureau-a-distance-protocole-rdp","title":"Installation du bureau \u00e0 distance \u2013 Protocole RDP","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/RDP-Situation-1/#activer-le-bureau-a-distance-sous-windows-server","title":"Activer le Bureau \u00e0 distance sous Windows Server :","text":"<p>Dans le <code>Gestionnaire de serveur &gt; Serveur local</code>, le param\u00e8tre Bureau \u00e0 distance permet d\u2019activer RDP. Par d\u00e9faut d\u00e9sactiv\u00e9, il emp\u00eache les connexions entrantes, mais le serveur peut toujours se connecter en RDP \u00e0 une autre machine.</p> <p></p> <p>En cliquant sur Activ\u00e9 ou D\u00e9sactiv\u00e9, on ouvre l\u2019interface de configuration du Bureau \u00e0 distance. Pour autoriser les connexions, il faut cocher Autoriser les connexions \u00e0 distance \u00e0 cet ordinateur.</p> <p></p> <p>Activer le Bureau \u00e0 distance sous Windows Server : <code>Param\u00e8tres \u2192 Syst\u00e8me \u2192 Bureau \u00e0 distance \u2192</code> <code>Activer</code>. </p> <p>Ouvrir le bureau \u00e0 distance :</p> <p></p> <p>Test de la connexion RDP pour le compte \u201cadminssh\u201d : Le type de compte adminssh a \u00e9t\u00e9 modifi\u00e9, car par d\u00e9faut il est en utilisateur standard. Pour permettre l\u2019acc\u00e8s en RDP, il doit \u00eatre configur\u00e9 en compte administrateur.</p> <p></p> <p></p> <p>Entrer votre identifiant et mot de passe : </p> <p></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/SSH-Situation-1/","title":"Fiche proc\u00e9dure protocole SSH","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/SSH-Situation-1/#1-installer-openssh-server-sur-windows","title":"1. Installer OpenSSH Server sur Windows","text":"<p>A partir d'une console PowerShell ouverte en tant qu'administrateur, la commande suivante permet l'installation :</p> <pre><code>Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0\n</code></pre> <p></p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/SSH-Situation-1/#2-configurer-openssh-server-sur-windows","title":"2. Configurer OpenSSH Server sur Windows","text":""},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/SSH-Situation-1/#21-demarrage-automatique-du-serveur-openssh","title":"2.1 D\u00e9marrage automatique du serveur OpenSSH","text":"<p>Pour commencer la configuration, nous allons d\u00e9marrer le serveur OpenSSH d'une part, et d'autre part nous allons le configurer en d\u00e9marrage automatique.</p> <p>Plut\u00f4t que le faire \u00e0 partir de la console \"Services\", je vous propose d'ex\u00e9cuter deux commandes PowerShell, ce sera plus efficace. Voici l'\u00e9tat actuel du service \"OpenSSH SSH Server\" :</p> <p></p> <p>Pour d\u00e9marrer le service \"sshd\" correspondant \u00e0 \"OpenSSH SSH Server\", on va utiliser la commande suivante :</p> <pre><code>Start-Service -Name \"sshd\"\n</code></pre> <p>Ensuite, pour le modifier et d\u00e9finir le mode de d\u00e9marrage sur \"Automatique\" au lieu de \"Manuel\" :</p> <p><pre><code>Set-Service -Name \"sshd\" -StartupType Automatic\n</code></pre> La commande ci-dessous vous permettra de v\u00e9rifier qu'il est bien en cours d'ex\u00e9cution.</p> <p><pre><code>Get-Service -Name \"sshd\"\n</code></pre> </p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/SSH-Situation-1/#22-configuration-dopenssh-server-sur-windows","title":"2.2 Configuration d'OpenSSH Server sur Windows","text":"<p>Sur Windows, la configuration d'OpenSSH est stock\u00e9e \u00e0 l'emplacement ci-dessous o\u00f9 l'on va trouver le fichier sshd_config :</p> <pre><code>%programdata%\\ssh\\\n</code></pre> <p>Au sein du fichier sshd_config, nous allons retrouver les options classiques d'OpenSSH. Nous pouvons le configurer de la m\u00eame fa\u00e7on qu'on le ferai la configuration SSH sous Linux.</p> <p>Attention tout de m\u00eame</p> <p>\u00c0 ce jour, il y a des options non support\u00e9es comme les options X11. La liste compl\u00e8te des options non support\u00e9es est disponible sur le site Microsoft : OpenSSH - Options non support\u00e9es</p> <p>Modifier le port d'\u00e9coute SSH</p> <p>Pour modifier le port d'\u00e9coute par d\u00e9faut (recommand\u00e9) et utiliser un autre port que le n\u00b022, il faut modifier l'option \"Port\". Pour modifier le fichier de configuration, vous devez ouvrir l'\u00e9diteur de texte en tant qu'administrateur pour avoir le droit d'enregistrer le fichier.</p> <p>Ensuite, il faut d\u00e9commenter la ligne \"<code>#Port 22</code>\" et changer le num\u00e9ro de port, comme ceci :</p> <p></p> <p>Apr\u00e8s chaque modification de la config, il est indispensable de red\u00e9marrer le service SSH pour charger les nouveaux param\u00e8tres. PowerShell permet de le faire facilement :</p> <pre><code>Restart-Service \"sshd\"\n</code></pre> <p>A la suite de la modification du port, si la connexion SSH ne fonctionne pas, regardez du c\u00f4t\u00e9 du pare-feu Windows. En effet, lors de l'installation d'OpenSSH Server, une r\u00e8gle est cr\u00e9\u00e9e pour autoriser les connexions sur le port 22.</p> <p>Voici la commande pour cr\u00e9er une r\u00e8gle de pare-feu qui autorise les connexions entrantes sur le port 222 :</p> <pre><code>New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH Server (sshd) - Port 222' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 222\n</code></pre> <p>Information sur le contexte</p> <p>Auparavant, j\u2019ai cr\u00e9\u00e9 un utilisateur \u00ab adminssh \u00bb afin d\u2019utiliser celui-ci \u00e0 la connexion SSH.</p> <p>Dans le fichier de configuration, il faut commenter les deux lignes suivantes, sinon la directive DenyGroups ne fonctionne pas :</p> <p><pre><code># Match Group administrators\n\n# AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys\n</code></pre> A la suite, ajoutez la ligne suivante :</p> <pre><code>DenyGroups administrateurs\n</code></pre> <p>Red\u00e9marrez le service SSH et tentez de vous connecter \u00e0 votre serveur avec un compte administrateur : l'acc\u00e8s doit \u00eatre refus\u00e9 !</p>"},{"location":"documentation/Bloc2-Administration%20des%20syst%C3%A8mes/Fiche-proc%C3%A9dure/SSH-Situation-1/#23-connexion-en-ssh","title":"2.3 Connexion en ssh :","text":"<pre><code>ssh adminssh@172.16.56.2 -p -222\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/","title":"Activit\u00e9 0 : Mise en place de l\u2019infrastructure r\u00e9seau des agences de l\u2019entreprise CUB","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#adressage","title":"Adressage","text":"Puissance de 2 Valeur 2\u2070 1 2\u00b9 2 2\u00b2 4 2\u00b3 8 2\u2074 16 2\u2075 32 2\u2076 64 2\u2077 128 <p>Adresse r\u00e9seau : 192.168.6.0/24</p> <p></p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20 <p></p> <p>N\u00b01 sous-r\u00e9seau Production = 126 h\u00f4tes \u2192 2\u2077 \u2192 /25 <p>Production = 192.168.6.0/24 \u2192 255.255.255.128 \u2192 x.x.x.1000 0000</p> <p>Diffusion : <code>1100 0000 . 1010 1000 . 0000 0110 . 0111 1111</code> \u27a1\ufe0f 192.168.6.127</p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#schema-logique-agence-frankfur","title":"Sch\u00e9ma logique \u2013 Agence Frankfur","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#plan-de-cablage","title":"Plan de c\u00e2blage","text":"<p>FW</p> Destination Masque Passerelle Interface Type 192.36.253.0 /24 192.36.253.60 192.36.253.60 C 192.36.6.0 /24 192.36.6.254 192.36.6.254 C 192.168.66.248 /28 192.168.66.254 192.168.66.254 C 192.168.6.0 /24 192.168.66.253 192.168.66.254 S 0.0.0.0 /0 192.36.253.254 192.36.253.60 S <p>LAYER 3</p> Destination Masque Passerelle Interface Type 192.168.6.0 /25 192.168.6.126 192.168.6.126 C 192.168.66.248 /28 192.168.66.253 192.168.66.253 C 192.168.6.128 /26 192.168.6.190 192.168.6.190 C 192.168.6.192 /28 192.168.66.206 192.168.66.206 S 0.0.0.0 /0 192.168.66.254 192.168.66.253 S <p>Routage NAT</p> Avant translation Apr\u00e8s translation Ip source Port Src IP dst Port dst Ip source Port Src IP dst Port dst 192.168.6.0 /24 * * * 192.36.253.60 /24 * * *"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#1-fichier-de-configuration-des-differents-equipements","title":"1. Fichier de configuration des diff\u00e9rents \u00e9quipements","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9charger la configuration du SW LAYER 2           \ud83d\udd17 Cliquer pour t\u00e9l\u00e9charger la configuration du SW LAYER 3          \ud83d\udd17 Cliquer pour t\u00e9l\u00e9charger la configuration du SW DMZ           \ud83d\udd17 Cliquer pour t\u00e9l\u00e9charger la configuration du pare feu agence           \ud83d\udd17 Cliquer pour t\u00e9l\u00e9charger la configuration du pare feu si\u00e8ge"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#2-configuration-du-routage-statique","title":"2. Configuration du routage statique","text":"<p>Router(config)# <pre><code> ip routing\n</code></pre></p> <p>Router(config)# <code>ip route destination masque passerelle</code></p> <p>Exemple : <pre><code>ip route 10.0.0.0 255.0.0.0 172.16.0.253\n</code></pre></p> <p>Pour afficher les routes cr\u00e9er :  <pre><code>show ip route\n</code></pre></p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#3-configuration-du-routage-nat","title":"3. Configuration du routage NAT","text":"<p>Avant de commencer, activer <code>IP routing</code></p> <p>Router(config)# <pre><code>ip routing\n</code></pre></p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#31-designer-les-interfaces-inside-et-outside-interne-et-externe","title":"3.1 D\u00e9signer les interfaces Inside et Outside (Interne et Externe)","text":"<p>Router(config)#</p> <pre><code>interface g0/0\nip nat inside\nno shutdown\n</code></pre> <p>Router(config)# <pre><code>interface g0/1\nip nat outside\nno shutdown \n</code></pre></p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#32-definir-les-adresses-locales-soumises-au-nat-dans-loptique-de-les-masquer-pour-quelles-puissent-avoir-acces-a-lexterieur-et-que-lexterieur-ne-voit-que-ladresse-du-routeur","title":"3.2 D\u00e9finir les adresses locales soumises au NAT dans l'optique de les masquer pour qu'elles puissent avoir acc\u00e8s \u00e0 l'ext\u00e9rieur et que l'ext\u00e9rieur ne voit que l'adresse du routeur.","text":"<p>Router(config)# : <code>access-list access-list number permit source ip wildcard_mask</code></p> <p>Le terme wildcard_mask d\u00e9signe un masque invers\u00e9, pour un masque de sous-r\u00e9seau de 255.255.255.0 le wildcard mask sera 0.0.0.255.</p> <p>Exemple : <pre><code>access-list 1 permit 10.0.0.0 0.255.255.255 \n</code></pre></p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#33-mise-en-place-de-la-translation-lan-vers-ip-publique","title":"3.3 Mise en place de la translation LAN vers IP publique","text":"<p>Router (config)# <code>ip nat inside source list numero-acl interface int-publique overload</code></p> <p>Exemple : <pre><code>ip nat inside source list 1 interface GigabitEthernet 0/1 overload\n</code></pre></p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A90/#4-configuration-du-pare-feu-stormshield","title":"4. Configuration du pare-feu Stormshield","text":"<p>Se r\u00e9f\u00e9rer \u00e0 la documentation suivante : https://cubdocumentation.sioplc.fr</p> <p></p> <p>Premier encadr\u00e9 : Ceci est la route par d\u00e9faut calcul\u00e9e auparavant sur la table de routage.</p> <p>Deuxi\u00e8me encadr\u00e9 : Ceci est l\u2019autre route statique calcul\u00e9e auparavant sur la table de routage.</p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/","title":"I - Serveur DNS r\u00e9cursif","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#adressage","title":"Adressage","text":"Puissance de 2 Valeur 2\u2070 1 2\u00b9 2 2\u00b2 4 2\u00b3 8 2\u2074 16 2\u2075 32 2\u2076 64 2\u2077 128 <p>Adresse r\u00e9seau : 192.168.6.0/24</p> <p></p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20 <p></p> <p>N\u00b01 sous-r\u00e9seau Production = 126 h\u00f4tes \u2192 2\u2077 \u2192 /25 <p>Production = 192.168.6.0/24 \u2192 255.255.255.128 \u2192 x.x.x.1000 0000</p> <p>Diffusion : <code>1100 0000 . 1010 1000 . 0000 0110 . 0111 1111</code> \u27a1\ufe0f 192.168.6.127</p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#schema-logique-agence-frankfur","title":"Sch\u00e9ma logique \u2013 Agence Frankfur","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#plan-de-cablage","title":"Plan de c\u00e2blage","text":"<p>Information sur le contexte</p> <p>DNS r\u00e9solveur (r\u00e9cursif) \u2192 VLAN Production</p> <p>@IP de mon DNS \u2192 192.168.6.10</p> <p>@IP du DNS de mon camarade \u2192 192.168.6.11 </p> <p>Nom de domaine FQDN : dns0.local.frankfurt.cub.sioplc.fr</p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#1-verification-prealable","title":"1.  V\u00e9rification pr\u00e9alable","text":"<p>Mettez \u00e0 jour votre serveur</p> <pre><code>sudo apt update &amp;&amp; sudo apt upgrade\n</code></pre> <p>Sur votre serveur Debian 12, installez le service de journalisation rsyslog \u00e0 la place de journalctl. Cela vous permettra de disposer de fichiers de log clairs au format texte situ\u00e9s dans <code>/var/log</code>.</p> <pre><code>sudo apt install rsyslog\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#2-definir-les-parametres-reseaux-du-serveur","title":"2. D\u00e9finir les param\u00e8tres r\u00e9seaux du serveur","text":"<pre><code>sudoedit /etc/network/interfaces\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#3-definir-le-serveur-dns-recursif-a-utiliser","title":"3. D\u00e9finir le serveur DNS r\u00e9cursif \u00e0 utiliser","text":"<pre><code>sudoedit /etc/resolv.conf\n</code></pre> <pre><code>nameserver 8.8.8.8\n</code></pre> <p>Attention</p> <p>Lorsque le service Unbound sera op\u00e9rationnel, remplacer 8.8.8.8 par 127.0.0.1 et ajouter ensuite le second serveur r\u00e9cursif produit par votre bin\u00f4me. </p> <p></p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#4-prendre-en-compte-les-modifications-des-parametres-reseaux","title":"4. Prendre en compte les modifications des param\u00e8tres r\u00e9seaux","text":"<pre><code>sudo systemctl restart networking\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#5-configurer-correctement-les-fichiers-etchostname-et-etchosts","title":"5. Configurer correctement les fichiers /etc/hostname et /etc/hosts","text":"<p>Le fichier hostname sert \u00e0 donner un nom \u00e0 votre serveur.</p> <pre><code>sudoedit /etc/hostname\n</code></pre> <pre><code>dns0\n</code></pre> <p></p> <p>Information</p> <p>Le fichier hosts, anc\u00eatre des stubresolver DNS, permet de faire la correspondance entre un nom et une IP. Il est g\u00e9n\u00e9ralement prioritaire sur la r\u00e9solution DNS (pour modifier l\u2019ordre de pr\u00e9f\u00e9rence, \u00e9ditez le fichier <code>/etc/nsswitch.conf</code>). Dans ce fichier, il est important de renseigner la correspondance entre votre adresse de boucle locale et un nom. Ainsi, si votre machine sollicite le nom indiqu\u00e9 lors d'un processus particulier, cela la renverra vers l'adresse de loopback.</p> <pre><code>sudoedit /etc/hosts\n</code></pre> <p></p> <p>Il est n\u00e9cessaire de red\u00e9marrer le serveur pour prendre en compte le changement de nom.</p> <pre><code>sudo shutdown -r now\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#6-installer-unbound-et-les-outils-dadministration-appropries","title":"6. Installer Unbound et les outils d'administration appropri\u00e9s","text":"<pre><code>sudo apt install unbound dnsutils tcpdump tmux curl\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/I%20Serveur%20DNS%20r%C3%A9cursif/#7-configurer-unbound","title":"7. Configurer Unbound","text":"<pre><code>sudoedit /etc/unbound/unbound.conf\n</code></pre> <p>Il est important de v\u00e9rifier ensuite que la syntaxe des lignes contenues dans le fichier de configuration est correcte. Pour cela, il existe la commande unbound-checkconf.</p> <pre><code>sudo unbound-checkconf\n</code></pre> <p>Notre serveur r\u00e9cursif va nativement s\u2019adresser aux serveurs faisant autorit\u00e9 sur Internet en sollicitant en premier l\u2019un des serveurs racines. Dans le cas o\u00f9 le serveur r\u00e9cursif serait amen\u00e9 \u00e0 devoir traiter des domaines locaux qui se trouvent en dehors de l\u2019arborescence DNS r\u00e9elle (ex\u00a0: btssio.lan ou epoka.local), il est important de l\u2019indiquer dans le fichier de configuration <code>(/etc/unbound/unbound.conf)</code> de la mani\u00e8re suivante\u00a0:</p> <p></p> <p>On r\u00e9cup\u00e8re les adresses des serveurs racines et nous les stockons dans le fichier <code>/var/lib/unbound/root.hints</code>. Ce fichier est indispensable et permet au service Unbound de savoir comment contacter le serveur racine le plus proche ou rapide.</p> <pre><code>sudo curl --output /var/lib/unbound/root.hints https://www.internic.net/domain/named.cache\nsudo chown -R unbound:unbound /var/lib/unbound/\n</code></pre> <p>On cr\u00e9e le fichier de log sp\u00e9cifique \u00e0 Unbound.</p> <pre><code>sudo touch /var/log/unbound.log\nchown unbound:unbound /var/log/unbound.log\nsudo systemctl restart unbound\nsudo systemctl status unbound\n</code></pre> <p>Attention</p> <p>Sur les syst\u00e8mes Debian r\u00e9cents, un logiciel de s\u00e9curit\u00e9 de type MAC (Mandatory Access Control) nomm\u00e9 AppArmor est activ\u00e9 par d\u00e9faut. Il surveille entre autres les droits d\u2019acc\u00e8s des diff\u00e9rents processus lanc\u00e9s sur le syst\u00e8me. Par d\u00e9faut, AppArmor emp\u00eache le service unbound de lire et d\u2019\u00e9crire dans le r\u00e9pertoire <code>/var/log/</code>. Il est donc indispensable de changer ces permissions.</p> <pre><code>sudoedit /etc/apparmor.d/usr.sbin.unbound\n</code></pre> <p></p> <p>On v\u00e9rifie que le nouveau fichier de configuration de AppArmor ne contient pas d\u2019erreurs puis on red\u00e9marre le service.</p> <pre><code>sudo apparmor_parser -r /etc/apparmor.d/usr.sbin.unbound\nsudo systemctl restart apparmor\n</code></pre> <p>Si l\u2019on souhaite observer les \u00e9v\u00e8nements journalis\u00e9s\u00a0:</p> <pre><code>sudo cat /var/log/unbound.log\n</code></pre> <p>Si l\u2019on souhaite observer les derniers \u00e9v\u00e8nements enregistr\u00e9s dans le fichier de log en temps r\u00e9el\u00a0:</p> <pre><code>sudo  tail -f /var/log/unbound.log\n</code></pre> <p>Pour finir : </p> <p></p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/","title":"II - Serveur DNS ma\u00eetre faisant autorit\u00e9","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#adressage","title":"Adressage","text":"Puissance de 2 Valeur 2\u2070 1 2\u00b9 2 2\u00b2 4 2\u00b3 8 2\u2074 16 2\u2075 32 2\u2076 64 2\u2077 128 <p>Adresse r\u00e9seau : 192.168.6.0/24</p> <p></p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20 <p></p> <p>N\u00b01 sous-r\u00e9seau Production = 126 h\u00f4tes \u2192 2\u2077 \u2192 /25 <p>Production = 192.168.6.0/24 \u2192 255.255.255.128 \u2192 x.x.x.1000 0000</p> <p>Diffusion : <code>1100 0000 . 1010 1000 . 0000 0110 . 0111 1111</code> \u27a1\ufe0f 192.168.6.127</p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#schema-logique-agence-frankfur","title":"Sch\u00e9ma logique \u2013 Agence Frankfur","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#plan-de-cablage","title":"Plan de c\u00e2blage","text":"<p>Information sur le contexte</p> <p>DNS faisant autorit\u00e9 \u2192 DMZ </p> <p>@IP de mon DNS \u2192 192.36.6.10</p> <p>@IP du DNS de mon camarade \u2192 192.36.6.11</p> <p>Nom de domaine FQDN : ns0.frankfurt.cub.sioplc.fr</p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#1-verification-prealable","title":"1.  V\u00e9rification pr\u00e9alable","text":"<p>Mettez \u00e0 jour votre serveur</p> <pre><code>sudo apt update &amp;&amp; sudo apt upgrade\n</code></pre> <p>Sur votre serveur Debian 12, installez le service de journalisation rsyslog \u00e0 la place de journalctl. Cela vous permettra de disposer de fichiers de log clairs au format texte situ\u00e9s dans <code>/var/log</code>.</p> <pre><code>sudo apt install rsyslog\n</code></pre> <p>Installez le service Bind 9 et les outils diagnostics DNS</p> <pre><code>sudo apt install bind9 dnsutils\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#2-definir-les-parametres-reseaux-du-serveur","title":"2. D\u00e9finir les param\u00e8tres r\u00e9seaux du serveur","text":"<pre><code>sudoedit /etc/network/interfaces\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#3-definir-le-serveur-dns-recursif-a-utiliser","title":"3. D\u00e9finir le serveur DNS r\u00e9cursif \u00e0 utiliser","text":"<p><pre><code>sudoedit /etc/resolv.conf\n</code></pre> </p> Pourquoi choisir ces serveurs DNS r\u00e9cursifs ? <p>Pour rappel, les serveurs DNS faisant autorit\u00e9 g\u00e8rent, dans la majorit\u00e9 des cas, des zones publiques appartenant \u00e0 l'arborescence r\u00e9elle. Ainsi, ils seront la plupart du temps h\u00e9berg\u00e9s dans une DMZ contrairement aux serveurs DNS r\u00e9cursifs qui seront install\u00e9s dans le LAN. Pour des raisons \u00e9videntes de s\u00e9curit\u00e9, il est plus pertinent que les serveurs d\u00e9finis dans le fichier <code>/etc/resolv.conf</code> soient des r\u00e9solveurs publics plut\u00f4t que les r\u00e9solveurs internes param\u00e9tr\u00e9s pr\u00e9c\u00e9demment. </p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#4-prendre-en-compte-les-modifications-des-parametres-reseaux","title":"4. Prendre en compte les modifications des param\u00e8tres r\u00e9seaux","text":"<pre><code>sudo systemctl restart networking\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#5-configurer-correctement-les-fichiers-etchostname-et-etchosts","title":"5. Configurer correctement les fichiers <code>/etc/hostname et /etc/hosts</code>","text":"<p>Le fichier hostname sert \u00e0 donner un nom \u00e0 votre serveur.</p> <pre><code>sudoedit /etc/hostname\n</code></pre> <pre><code>ns0\n</code></pre> <p>Information</p> <p>Le fichier hosts, anc\u00eatre des stubresolver DNS, permet de faire la correspondance entre un nom et une IP. Il est g\u00e9n\u00e9ralement prioritaire sur la r\u00e9solution DNS (pour modifier l\u2019ordre de pr\u00e9f\u00e9rence, \u00e9ditez le fichier <code>/etc/nsswitch.conf</code>). Dans ce fichier, il est important de renseigner la correspondance entre votre adresse de boucle locale et un nom. Ainsi, si votre machine sollicite le nom indiqu\u00e9 lors d'un processus particulier, cela la renverra vers l'adresse de loopback.</p> <p><pre><code>sudoedit /etc/hosts\n</code></pre> </p> <p>Il est n\u00e9cessaire de red\u00e9marrer le serveur pour prendre en compte le changement de nom.</p> <pre><code>sudo shutdown -r now\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#6-principes-generaux-concernant-bind9-et-le-service-dns","title":"6. Principes g\u00e9n\u00e9raux concernant Bind9 et le service DNS.","text":"<ol> <li>Cr\u00e9er dans le r\u00e9pertoire <code>/var/named/</code> les zones ad\u00e9quates \u00e0 l\u2019aide d\u2019un fichier db.xxxxxx (ou xxxxxx correspond \u00e0 votre nom de domaine) par exemple, db.tours.btsssio.fr.</li> <li>Initialiser la ou les zones dans <code>/etc/bind/named.conf.local</code></li> <li>Ajouter ou g\u00e9rer les options globales du daemon Bind 9 dans <code>/etc/bind/named.conf.options</code></li> <li>Faire particuli\u00e8rement attention \u00e0 la syntaxe. </li> <li>Penser aux commandes de test et red\u00e9marrer ou recharger le service.</li> </ol> <p>Les commandes \u00e0 conna\u00eetre absolument sont les suivantes et vous seront utiles tout au long de votre activit\u00e9\u00a0:</p> <ul> <li>dig</li> <li>host</li> <li>nslookup (sous Windows)</li> <li>named-checkconf</li> <li>named-checkzone</li> <li>service bind9 stop|start|restart|reload|status (fonctionne avec SysVinit, systemd)</li> <li>avec systemd, systemctl stop|start|restart|reload|status bind9</li> </ul>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/II%20Serveur%20DNS%20ma%C3%AEtre%20faisant%20autorit%C3%A9/#7-exemple-de-configuration-dun-serveur-dns-maitre-faisant-autorite","title":"7. Exemple de configuration d'un serveur DNS ma\u00eetre faisant autorit\u00e9","text":"<p>Attention</p> <p>Il est recommand\u00e9 de supprimer le contenu des fichiers de configuration par d\u00e9faut et d'utiliser le contenu fourni ci-dessous. N'oubliez pas que etckeeper doit \u00eatre mobilis\u00e9.</p> <pre><code>sudo cat /etc/bind/named.conf\n</code></pre> <p></p> <p>Le fichier <code>/etc/bind/named.conf</code> est le fichier de configuration global du service DNS. Il est possible d'y renseigner tous les param\u00e8tres de configuration du service.</p> <p>Sous Debian, il a \u00e9t\u00e9 d\u00e9cid\u00e9 dans un souci de lisibilit\u00e9, de scinder la configuration en plusieurs fichiers. Ces fichiers sont appel\u00e9s par le fichier de configuration g\u00e9n\u00e9ral \u00e0 l'aide de la directive include.</p> <ul> <li>Le fichier named.conf.options est utilis\u00e9 pour d\u00e9clarer les options de configuration li\u00e9es \u00e0 Bind.</li> <li>Le fichier named.conf.local sert \u00e0 d\u00e9clarer les zones nouvellement cr\u00e9\u00e9es.</li> <li>Le fichier named.conf.default-zones contient les d\u00e9clarations de fichier de zone concernant la racine DNS et la boucle locale.</li> <li>Le fichier named.conf.log n'existe pas mais vous permettra de g\u00e9rer la journalisation de votre service dans un fichier texte d\u00e9di\u00e9.</li> </ul> <pre><code>sudo cat /etc/bind/named.conf.options\n</code></pre> <p></p> <pre><code>sudoedit /etc/bind/named.conf.local\n</code></pre> <p></p> <p>Ce fichier sert \u00e0 d\u00e9clarer les zones que vous aurez \u00e0 g\u00e9rer. Votre serveur peut-\u00eatre ma\u00eetre sur une zone ou esclave. La directive file sert \u00e0 d\u00e9clarer le fichier de zone contenant les enregistrements li\u00e9s (SOA, NS, A\u2026). La directive allow-transfer permet de d\u00e9clarer les serveurs esclaves habilit\u00e9s.</p> <p>Attention</p> <p>Le num\u00e9ro de s\u00e9rie ne doit jamais \u00eatre choisi au hasard et syst\u00e9matiquement incr\u00e9ment\u00e9 \u00e0 chaque modification du fichier de zone. Les guides de bonnes pratiques recommande de choisir la date du jour sous 2025090101 (ann\u00e9e/mois/jour/id). Dans le cas d'une architecture ma\u00eetre-esclave si le num\u00e9ro de s\u00e9rie pr\u00e9sent sur le ma\u00eetre se retrouve d\u00e9cr\u00e9ment\u00e9 et inf\u00e9rieur \u00e0 celui du serveur esclave, le transfert de zone ne se fera plus !</p> <p><pre><code>sudoedit /var/cache/bind/db.frankfurt.cub.sioplc.fr\nsudo chown bind:bind /var/cache/bind/db.frankfurt.cub.sioplc.fr\n</code></pre> </p> <p>Attention</p> <p>Ceci est un exemple de fichier de zone \u00e0 r\u00e9adapter sans les commentaires (;). Tous les enregistrements pr\u00e9sents dans cet exemple ne servent pas forc\u00e9ment dans le TP. Par contre, il est pertinent de rechercher leurs significations sur Internet pour comprendre \u00e0 quoi ils peuvent servir dans un contexte professionnel.</p> <p>Mise en place d\u2019une journalisation des \u00e9v\u00e8nements du service DNS</p> <p><pre><code>sudoedit /etc/bind/named.conf.log\n</code></pre> </p> <p>Ce fichier permet d'activer la journalisation des \u00e9v\u00e8nements pour le service DNS. Vous pouvez pr\u00e9ciser le niveau de verbosit\u00e9 avec la directive severity mais aussi la taille maximale du fichier de log. Comme pour le fichier de zone esclave, il est n\u00e9cessaire de cr\u00e9er un fichier vide de log avec les bonnes permissions au pr\u00e9alable :</p> <pre><code>sudo touch /var/log/bind.log\nsudo chown bind:bind /var/log/bind.log\n</code></pre> <p>Enfin, on n\u2019oublie pas de d\u00e9clarer ce nouveau fichier de configuration dans <code>/etc/bind/named.conf</code>.</p> <pre><code>sudoedit /etc/bind/named.conf\n</code></pre> <p></p> <p>Attention</p> <p>Sur les syst\u00e8mes Debian r\u00e9cents, un logiciel de s\u00e9curit\u00e9 de type MAC (Mandatory Access Control) nomm\u00e9 AppArmor est activ\u00e9 par d\u00e9faut. Il surveille entre autres les droits d\u2019acc\u00e8s des diff\u00e9rents processus lanc\u00e9s sur le syst\u00e8me. Par d\u00e9faut, AppArmor emp\u00eache le service Bind 9 de lire et \u00e9crire dans le r\u00e9pertoire <code>/var/log/</code>. Il est donc indispensable de changer ces permissions.</p> <pre><code>sudoedit /etc/apparmor.d/usr.sbin.named\n</code></pre> <p><pre><code># On autorise le daemon Bind 9 \u00e0 lire et ecrire dans le fichier /var/log/bind.log\n\n/var/log/bind.log rw,\n</code></pre> </p> <p>On v\u00e9rifie que le nouveau fichier de configuration de AppArmor ne contient pas d\u2019erreurs puis on red\u00e9marre le service.</p> <pre><code>sudo apparmor_parser -r /etc/apparmor.d/usr.sbin.named\nsudo systemctl restart apparmor\n</code></pre> named-checkconf <p>La commande named-checkconf permet de v\u00e9rifier si des erreurs de syntaxe sont pr\u00e9sentes et de fournir les \u00e9l\u00e9ments ou lignes qui posent probl\u00e8me dans un fichier en particulier.</p> <pre><code>sudo named-checkconf -z\nsudo systemctl restart bind9\nsudo systemctl status bind9\n</code></pre>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/III%20Serveur%20DNS%20esclave%20faisant%20autorit%C3%A9/","title":"III - Serveur DNS esclave faisant autorit\u00e9","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/III%20Serveur%20DNS%20esclave%20faisant%20autorit%C3%A9/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/III%20Serveur%20DNS%20esclave%20faisant%20autorit%C3%A9/#adressage","title":"Adressage","text":"Puissance de 2 Valeur 2\u2070 1 2\u00b9 2 2\u00b2 4 2\u00b3 8 2\u2074 16 2\u2075 32 2\u2076 64 2\u2077 128 <p>Adresse r\u00e9seau : 192.168.6.0/24</p> <p></p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20 <p></p> <p>N\u00b01 sous-r\u00e9seau Production = 126 h\u00f4tes \u2192 2\u2077 \u2192 /25 <p>Production = 192.168.6.0/24 \u2192 255.255.255.128 \u2192 x.x.x.1000 0000</p> <p>Diffusion : <code>1100 0000 . 1010 1000 . 0000 0110 . 0111 1111</code> \u27a1\ufe0f 192.168.6.127</p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/III%20Serveur%20DNS%20esclave%20faisant%20autorit%C3%A9/#schema-logique-agence-frankfur","title":"Sch\u00e9ma logique \u2013 Agence Frankfur","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/III%20Serveur%20DNS%20esclave%20faisant%20autorit%C3%A9/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/III%20Serveur%20DNS%20esclave%20faisant%20autorit%C3%A9/#plan-de-cablage","title":"Plan de c\u00e2blage","text":"<p>Information sur le contexte</p> <p>Manipulation et documentation r\u00e9aliser par mon Bin\u00f4me Joris TEXIER</p> <p>V\u00e9rification pr\u00e9alable</p> <pre><code>sudo apt update &amp;&amp; sudo apt upgrade\nsudo apt install rsyslog bind9 dnsutils\n</code></pre> <p>Param\u00e8tres r\u00e9seaux</p> <pre><code>sudoedit /etc/network/interfaces\nsudoedit /etc/resolv.conf\nnameserver 9.9.9.9\nsudo systemctl restart networking\n</code></pre> <p></p> <p>Configuration des fichiers d'identit\u00e9</p> <p><pre><code>sudoedit /etc/hostname\nns1\nsudoedit /etc/hosts\nsudo shutdown -r now\n</code></pre> </p> <p>Exemple de configuration Bind9 (esclave) <pre><code>sudoedit /etc/bind/named.conf.local\nsudo touch /var/cache/bind/db.frankfurt.cub.sioplc.fr\nsudo chown bind:bind /var/cache/bind/db.frankfurt.cub.sioplc.fr\n</code></pre> </p> <p>Mise en place de la journalisation <pre><code>sudoedit /etc/bind/named.conf.log\nsudo touch /var/log/bind.log\nsudo chown bind:bind /var/log/bind.log\nsudoedit /etc/bind/named.conf\n</code></pre> </p> <p>Configuration AppArmor :</p> <pre><code>sudoedit /etc/apparmor.d/usr.sbin.named\n# Autoriser le daemon Bind 9 \u00e0 lire et \u00e9crire dans /var/log/bind.log\n/var/log/bind.log rw,\nsudo apparmor_parser -r /etc/apparmor.d/local/usr.sbin.named\nsudo systemctl restart apparmor\nsudo named-checkconf -z\nsudo systemctl restart bind9\nsudo systemctl status bind9\n</code></pre> <p></p> <p>TEST</p> <p>Cette commande permet de tester la r\u00e9solution DNS d\u2019un domaine pr\u00e9cis :</p> <p><pre><code>nslookup ns0.frankfurt.cub.sioplc.fr 192.36.6.10\n</code></pre> R\u00e9sultat attendu : - <code>ns0.frankfurt.cub.sioplc.fr</code> \u2192 <code>192.36.6.11</code> (esclave) - <code>ns1.frankfurt.cub.sioplc.fr</code> \u2192 <code>192.36.6.10</code> (ma\u00eetre)</p> <p> </p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/IV%20D%C3%A9l%C3%A9gation%20de%20zone/","title":"IV - D\u00e9l\u00e9gation de zone","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/IV%20D%C3%A9l%C3%A9gation%20de%20zone/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/IV%20D%C3%A9l%C3%A9gation%20de%20zone/#adressage","title":"Adressage","text":"Puissance de 2 Valeur 2\u2070 1 2\u00b9 2 2\u00b2 4 2\u00b3 8 2\u2074 16 2\u2075 32 2\u2076 64 2\u2077 128 <p>Adresse r\u00e9seau : 192.168.6.0/24</p> <p></p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20 <p></p> <p>N\u00b01 sous-r\u00e9seau Production = 126 h\u00f4tes \u2192 2\u2077 \u2192 /25 <p>Production = 192.168.6.0/24 \u2192 255.255.255.128 \u2192 x.x.x.1000 0000</p> <p>Diffusion : <code>1100 0000 . 1010 1000 . 0000 0110 . 0111 1111</code> \u27a1\ufe0f 192.168.6.127</p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/IV%20D%C3%A9l%C3%A9gation%20de%20zone/#schema-logique-agence-frankfur","title":"Sch\u00e9ma logique \u2013 Agence Frankfur","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/IV%20D%C3%A9l%C3%A9gation%20de%20zone/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/IV%20D%C3%A9l%C3%A9gation%20de%20zone/#plan-de-cablage","title":"Plan de c\u00e2blage","text":""},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/IV%20D%C3%A9l%C3%A9gation%20de%20zone/#connexion-en-ssh-au-serveur-maitre-parent","title":"Connexion en SSH au serveur ma\u00eetre parent","text":"<p><pre><code>ssh admin@192.36.250.10\n</code></pre> </p>"},{"location":"documentation/Bloc2-Exploitation%20des%20services/Activit%C3%A91%20%3A%20Mise%20en%20place%20de%20serveurs%20DNS%20au%20sein%20de%20l%E2%80%99entreprise%20CUB/IV%20D%C3%A9l%C3%A9gation%20de%20zone/#modification-du-fichier-de-zone-du-domaine-parent","title":"Modification du fichier de zone du domaine parent","text":"<p><pre><code>sudoedit /var/cache/bind/db.cub.sioplc.fr\n</code></pre> Ajouter \u00e0 la fin du fichier :</p> <pre><code>; Cr\u00e9ation de la d\u00e9l\u00e9gation de zone (Joris &amp;&amp; Esteban &amp;&amp; Lahcen) \nfrankfurt.cub.sioplc.fr. IN NS ns0.frankfurt.cub.sioplc.fr. \nfrankfurt.cub.sioplc.fr. IN NS nsl.frankfurt.cub.sioplc.fr. \nfrankfurt.cub.sioplc.fr. IN NS ns2.frankfurt.cub.sioplc.fr.\n; Cr\u00e9ation des enregistrements glue pour la d\u00e9l\u00e9gation BC \nns0.frankfurt IN A 192.36.6.10\nns1.frankfurt IN A 192.36.6.11\nns2.frankfurt IN A 192.36.6.12\n</code></pre> <p></p> <p>V\u00e9rifier et recharger la configuration :</p> <pre><code>sudo named-checkconf -z\nsudo systemctl reload bind9\n</code></pre>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/","title":"Pr\u00e9sentation du service BASTION","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#i-presentation-du-service","title":"I - Pr\u00e9sentation du service","text":"<p>C\u2019est quoi le Bastion : Un bastion d\u2019administration c\u2019est un serveur qui sert de passerelle s\u00e9curis\u00e9e pour acc\u00e9der \u00e0 d\u2019autres machines sur un r\u00e9seau priv\u00e9. Au lieu de se connecter directement au serveur interne, les utilisateurs vont d\u2019abord se connecter au Bastion ce qui permet de mieux contr\u00f4ler et de surveiller les acc\u00e8s</p> <p>En claire, le Bastion permet de centraliser les connexions.</p> <p>Sans Bastion</p> <p>Chaque serveur doit \u00eatre expos\u00e9 aux ports 22 et 3389.</p> <p>Avec Bastion</p> <p>Seul le Bastion est expos\u00e9, les autres serveurs restent cach\u00e9s. </p> <p></p> <p>Pour r\u00e9sum\u00e9 : Un Bestion c\u2019est comme un sas de s\u00e9curit\u00e9 num\u00e9rique. Tu passes par lui pour aller administrer le reste. Apache Guacamole est un exemple pratique qui permet de faire de mani\u00e8re simple, centralis\u00e9e et s\u00e9curis\u00e9e via un navigateur </p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#ii-installer-apache-guacamole-sur-debian","title":"II - Installer Apache Guacamole sur Debian","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#a-installer-les-prerequis-dapache-guacamole","title":"A - Installer les pr\u00e9requis d'Apache Guacamole","text":"<p>Sur la machine Debian, l\u2019installation de ces d\u00e9pendances se fait \u00e0 l\u2019aide de la commande suivante :</p> <p><pre><code>apt-get update\n</code></pre> <pre><code>apt-get install build-essential libcairo2-dev libjpeg62-turbo-dev libpng-dev libtool-bin uuid-dev libossp-uuid-dev libavcodec-dev libavformat-dev libavutil-dev libswscale-dev freerdp2-dev libpango1.0-dev libssh2-1-dev libtelnet-dev libvncserver-dev libwebsockets-dev libpulse-dev libssl-dev libvorbis-dev libwebp-dev\n</code></pre> Patienter le temps de l'installation.</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#b-compiler-et-installer-apache-guacamole-server","title":"B - Compiler et installer Apache Guacamole \"Server\"","text":"<p>La partie \u00ab Server \u00bb d\u2019Apache Guacamole doit \u00eatre t\u00e9l\u00e9charg\u00e9e puis compil\u00e9e localement pour proc\u00e9der \u00e0 l\u2019installation. Nous utiliserons la derni\u00e8re version disponible, en l\u2019occurrence la 1.5.5. Pour v\u00e9rifier la version la plus r\u00e9cente, il est possible de s\u2019appuyer sur les deux liens suivants :</p> <ul> <li> <p>Historique des versions d'Apache Guacamole : https://guacamole.apache.org/releases/</p> </li> <li> <p>T\u00e9l\u00e9charger les sources d'installation d'Apache Guacamole : https://dlcdn.apache.org/guacamole/</p> </li> </ul> <p>(Dans notre cas nous allons utiliser la version 1.5.5 qui est stable)</p> <p>On va se positionner dans le r\u00e9pertoire <code>/tmp</code> et t\u00e9l\u00e9charger l'archive <code>tar.gz</code> :</p> <p><pre><code>cd /tmp\n</code></pre> <pre><code>wget https://downloads.apache.org/guacamole/1.5.5/source/guacamole-server-1.5.5.tar.gz\n</code></pre></p> <p>Une fois le t\u00e9l\u00e9chargement termin\u00e9, on d\u00e9compresse l'archive tar.gz et on se positionne dans le r\u00e9pertoire obtenu :</p> <pre><code>tar -xzf guacamole-server-1.5.5.tar.gz\n</code></pre> <p><pre><code>cd guacamole-server-1.5.5/\n</code></pre> On ex\u00e9cute la commande ci-dessous pour se pr\u00e9parer \u00e0 la compilation, ce qui va permettre de v\u00e9rifier la pr\u00e9sence des d\u00e9pendances :</p> <pre><code>sudo ./configure --with-systemd-dir=/etc/systemd/system/\n</code></pre> <p>Avant de passer \u00e0 la suite, on v\u00e9rifie la sortie de cette commande. Normalement, les librairies principales et dont nous avons besoin sont sur le statut \"yes\". Comme ceci :</p> <p></p> <p>Regardez bien la sortie de la commande pr\u00e9c\u00e9dente, afin de v\u00e9rifier la pr\u00e9sence \u00e9ventuelle d'une erreur. Si vous obtenez une erreur qui sp\u00e9cifie \"guacenc_video_alloc\", c'est li\u00e9 au composant \"guacenc\" qui est utilis\u00e9 pour cr\u00e9er les enregistrements au format vid\u00e9o. Dans ce cas, vous pouvez relancer la commande pr\u00e9c\u00e9dente en d\u00e9sactivant ce composant</p> <p><pre><code>sudo ./configure --with-systemd-dir=/etc/systemd/system/ --disable-guacenc\n</code></pre> Ensuite, poursuivez avec la compilation du code source de guacamole-server :</p> <p><pre><code>sudo make\n</code></pre> Enfin, on termine par installer le composant Guacamole Server :</p> <pre><code>sudo make install\n</code></pre> <p></p> <p>La partie serveur d'Apache Guacamole est install\u00e9e !  Mais d'autres \u00e9tapes sont \u00e0 r\u00e9aliser...</p> <p>La commande ci-dessous sert \u00e0 mettre \u00e0 jour les liens entre guacamole-server et les librairies :</p> <pre><code>sudo ldconfig\n</code></pre> <p>Ensuite, on va d\u00e9marrer le service <code>guacd</code> correspondant \u00e0 Guacamole et activer son d\u00e9marrage automatique. La premi\u00e8re commande sert \u00e0 prendre en compte le nouveau service.</p> <p><pre><code>sudo systemctl daemon-reload\n</code></pre> <pre><code>sudo systemctl enable --now guacd\n</code></pre> Enfin, on v\u00e9rifie le statut d'Apache Guacamole Server :</p> <pre><code>sudo systemctl status guacd\n</code></pre>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#c-creer-le-repertoire-de-configuration","title":"C - Cr\u00e9er le r\u00e9pertoire de configuration","text":"<p>Derni\u00e8re \u00e9tape avant de passer \u00e0 la partie client d'Apache Guacamole, on cr\u00e9e l'arborescence pour la configuration d'Apache Guacamole. Cela va donner le r\u00e9pertoire <code>/etc/guacamole</code> avec les sous-r\u00e9pertoires \"extensions\" et \"lib\". Nous en aurons besoin par la suite pour mettre en place le stockage des donn\u00e9es dans une base de donn\u00e9es MariaDB / MySQL.</p> <pre><code>sudo mkdir -p /etc/guacamole/{extensions,lib}\n</code></pre>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#d-installer-guacamole-client-web-app","title":"D - Installer Guacamole Client (Web App)","text":"<p>Pour la Web App correspondante \u00e0 Apache Guacamole, et donc \u00e0 la partie cliente, nous avons besoin d'un serveur Tomcat 9 <sup>1</sup> . J'insiste sur le fait que Tomcat 10, distribu\u00e9 par d\u00e9faut via les d\u00e9p\u00f4ts de Debian 12, n'est pas pris en charge par Apache Guacamole. Nous devons ajouter le d\u00e9p\u00f4t de Debian 11 sur notre machine Debian 12 afin de pouvoir t\u00e9l\u00e9charger les paquets correspondants \u00e0 Tomcat 9. (Explication \u00ab Tomcat \u00bb en annexe)</p> <p>Nous allons ajouter un nouveau fichier source pour Apt. Cr\u00e9ez le fichier suivant : <pre><code>sudo nano /etc/apt/sources.list.d/bullseye.list \n</code></pre></p> <p>Ajoutez cette ligne, enregistrez et fermez le fichier. <pre><code>deb http://deb.debian.org/debian/ bullseye main\n</code></pre></p> <p>Mettez \u00e0 jour le cache des paquets : <pre><code>sudo apt-get update\n</code></pre></p> <p>Effectuez l'installation des paquets Tomcat 9 sur Debian 12 avec cette commande : <pre><code>sudo apt-get install tomcat9 tomcat9-admin tomcat9-common tomcat9-user\n</code></pre></p> <p>Puis, nous allons t\u00e9l\u00e9charger la derni\u00e8re version de la Web App d'Apache Guacamole depuis le d\u00e9p\u00f4t officiel (m\u00eame endroit que pour la partie serveur). On se positionne dans <code>/tmp</code> et on t\u00e9l\u00e9charge la Web App, ce qui revient \u00e0 t\u00e9l\u00e9charger un fichier avec l'extension <code>.war</code>. Ici, la version 1.5.5 est t\u00e9l\u00e9charg\u00e9e.</p> <p><pre><code>cd /tmp\n</code></pre> <pre><code>wget https://downloads.apache.org/guacamole/1.5.5/binary/guacamole-1.5.5.war\n</code></pre> Une fois que le fichier est t\u00e9l\u00e9charg\u00e9, on le d\u00e9place dans la librairie de Web App de Tomcat9 avec cette commande :</p> <pre><code>sudo mv guacamole-1.5.5.war /var/lib/tomcat9/webapps/guacamole.war\n</code></pre> <p>Puis, on relance les services Tomcat9 et Guacamole : <pre><code>sudo systemctl restart tomcat9 guacd\n</code></pre> Apache Guacamole Client est install\u00e9 !</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#e-base-de-donnees-mariadb-pour-lauthentification","title":"E - Base de donn\u00e9es MariaDB pour l'authentification","text":"<p>D\u00e9ploiement de MariaDB</p> <p>Cette derni\u00e8re \u00e9tape avant de commencer \u00e0 utiliser Apache Guacamole consiste \u00e0 d\u00e9ployer MariaDB Server (ou MySQL Server, au choix) sur Debian pour qu'Apache Guacamole s'appuie sur une base de donn\u00e9es. Cette base de donn\u00e9es sera utilis\u00e9e pour stocker toutes les informations de l'application.</p> <p>On commence par installer le paquet MariaDB Server : <pre><code>sudo apt-get install mariadb-server\n</code></pre></p> <p>Puis, on ex\u00e9cute le script ci-dessous pour s\u00e9curiser un minimum notre instance (changer le mot de passe root, d\u00e9sactiver les acc\u00e8s anonymes, etc...). Si besoin d'aide pour cette partie, je vous encourage \u00e0 regarder ce tutoriel.</p> <p><pre><code>sudo mysql_secure_installation\n</code></pre> </p> <p>Une fois cette \u00e9tape effectu\u00e9e, on va se connecter en tant que root \u00e0 notre instance MariaDB : <pre><code>mysql -u root -p\n</code></pre></p> <p>Ceci est utile pour cr\u00e9er une base de donn\u00e9es et un utilisateur d\u00e9di\u00e9 pour Apache Guacamole. Les commandes ci-dessous permettent de cr\u00e9er la base de donn\u00e9es <code>guacadb</code>, avec l'utilisateur <code>guaca_user</code> associ\u00e9 au mot de passe <code>etudiant_007</code> (adaptez ces valeurs sibesoin). Cet utilisateur dispose de quelques droits sur la base de donn\u00e9es.</p> <p><pre><code>CREATE DATABASE guacadb;\nCREATE USER 'guaca_user'@'localhost' IDENTIFIED BY 'etudiant_007';\nGRANT SELECT,INSERT,UPDATE,DELETE ON guacadb.* TO 'guaca_user'@'localhost';\nFLUSH PRIVILEGES;\nEXIT;\n</code></pre> </p> <p>La suite va consister \u00e0 ajouter l'extension MySQL \u00e0 Apache Guacamole ainsi que le connecteur correspondant.</p> <p>Toujours depuis le d\u00e9p\u00f4t officiel, on t\u00e9l\u00e9charge cette extension :</p> <p><pre><code>cd /tmp\n</code></pre> <pre><code>wget https://downloads.apache.org/guacamole/1.5.5/binary/guacamole-auth-jdbc-1.5.5.tar.gz\n</code></pre></p> <p>Puis, on d\u00e9compresse l'archive <code>tar.gz</code> obtenue : <pre><code>tar -xzf guacamole-auth-jdbc-1.5.5.tar.gz\n</code></pre></p> <p>On d\u00e9place le fichier <code>.jar</code> de l'extension dans le r\u00e9pertoire <code>/etc/guacamole/extensions/</code> cr\u00e9\u00e9 pr\u00e9c\u00e9demment :</p> <p><pre><code>sudo mv guacamole-auth-jdbc-1.5.5/mysql/guacamole-auth-jdbc-mysql-1.5.5.jar /etc/guacamole/extensions/\n</code></pre> Ensuite, le connecteur MySQL doit \u00eatre t\u00e9l\u00e9charg\u00e9 depuis le site de MySQL (peu importe si vous utilisez MariaDB ou MySQL).</p> <p>T\u00e9l\u00e9cherger le connecteur MySQL</p> <p>Utilisez le lien ci-dessous pour rep\u00e9rer le lien de la derni\u00e8re version en choisissant \"Platform Independent\", puis en cliquant sur le bouton \"Download\" permettant d'obtenir la \"Compressed TAR Archive\".</p> <p>T\u00e9l\u00e9charger le connecteur MySQL</p> <p>Une autre page se charge, copiez le lien sous \"No thanks, just start my download.\". Pour la version actuelle, \u00e0 savoir 9.1.0, le lien est inclus \u00e0 la commande ci-dessous. (le lien est d\u00e9j\u00e0 renseigner dans la commande ci-dessous)</p> <p>On lance le t\u00e9l\u00e9chargement : <pre><code>cd /tmp\n</code></pre> <pre><code>wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-j-9.1.0.tar.gz\n</code></pre></p> <p>Puis, on d\u00e9compresse l'archive tar.gz : <pre><code>tar -xzf mysql-connector-j-9.1.0.tar.gz\n</code></pre></p> <p>On copie (ou d\u00e9place) le fichier <code>.jar</code> du connecteur vers le r\u00e9pertoire <code>lib</code> d'Apache Guacamole : <pre><code>sudo cp mysql-connector-j-9.1.0/mysql-connector-j-9.1.0.jar /etc/guacamole/lib/\n</code></pre> Les d\u00e9pendances sont d\u00e9ploy\u00e9es, mais nous n'avons pas encore fini cette int\u00e9gration avec MariaDB.</p> <p>En effet, il faut importer la structure de la base de donn\u00e9es Apache Guacamole dans notre base de donn\u00e9es <code>guacadb</code>. Pour cela, on va importer tous les fichiers SQL situ\u00e9s dans le r\u00e9pertoire <code>guacamole-auth-jdbc-1.5.5/mysql/schema/</code>. Le mot de passe root de MariaDB doit \u00eatre saisit pour effectuer l'import.</p> <p><pre><code>cd guacamole-auth-jdbc-1.5.5/mysql/schema/\n</code></pre> <pre><code>cat *.sql | mysql -u root -p guacadb\n</code></pre></p> <p>Une fois que c'est fait, on va cr\u00e9er et \u00e9diter le fichier <code>guacamole.properties</code> pour d\u00e9clarer la connexion \u00e0 MariaDB. Ce fichier peut \u00eatre utilis\u00e9 pour d'autres param\u00e8tres, selon vos besoins.</p> <pre><code>sudo nano /etc/guacamole/guacamole.properties\n</code></pre> <p>Dans ce fichier, ins\u00e9rez les lignes ci-dessous en adaptant les trois derni\u00e8res lignes avec vos valeurs (si vous avez suivi la documentation ci-dessus, alors rien n\u2019est \u00e0 changer) :</p> <p><pre><code># MySQL\nmysql-hostname: 127.0.0.1\nmysql-port: 3306\nmysql-database: guacadb\nmysql-username: guaca_user\nmysql-password: etudiant_007\n</code></pre> Enregistrez et fermez le fichier.</p> <p>Tant que l'on est dans la configuration, \u00e9ditez le fichier <code>guacd.conf</code> pour d\u00e9clarer le serveur Guacamole (ici, on d\u00e9clare une connexion locale sur le port par d\u00e9faut, \u00e0 savoir 4822).</p> <pre><code>sudo nano /etc/guacamole/guacd.conf\n</code></pre> <p>Voici le code \u00e0 int\u00e9grer : <pre><code>[server] \nbind_host = 0.0.0.0\nbind_port = 4822\n</code></pre></p> <p>On enregistre et on termine par red\u00e9marrer les trois services li\u00e9s \u00e0 Apache Guacamole : <pre><code>sudo systemctl restart tomcat9 guacd mariadb\n</code></pre> L'installation de base est enfin termin\u00e9e !!!</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#iii-utilisation-dapache-guacamole","title":"III - Utilisation d\u2019Apache Guacamole","text":"<p>On va pouvoir se connecter \u00e0 Apache Guacamole pour effectuer nos premiers pas sur l'interface de la Web App.</p> <p><code>http://&lt;Adresse IP&gt;:8080/guacamole/</code></p> <p>La page de connexion suivante va s'afficher : </p> <p>Pour se connecter, on va utiliser les identifiants par d\u00e9faut :</p> <ul> <li>Utilisateur : guacadmin</li> <li>Mot de passe : guacadmin</li> </ul> <p>Nous voil\u00e0 sur Apache Guacamole ! Mais pour l'instant, c'est vide... </p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#a-ajouter-une-connexion-ssh","title":"A - Ajouter une connexion SSH","text":"<p>Nous allons cr\u00e9er notre premi\u00e8re connexion dans Apache Guacamole, de mani\u00e8re \u00e0 se connecter \u00e0 un serveur en SSH !</p> <p>Pour cr\u00e9er une nouvelle connexion : <code>Param\u00e8tres &gt; Connexion &gt; Nouvelle connexion</code></p> <p></p> <p>Puis dans l\u2019onglet \u00ab Connexions \u00bb faite \u00ab Nouvelle Connexion \u00bb </p> <p></p> <p>Renseigner maintenant les informations de votre serveur cible :</p> <p></p> <p>Retourner maintenant dans Accueil</p> <p></p> <p>Cliquer simplement sur la configuration de connexion que vous venez de cr\u00e9er afin de vous y connecter </p> <p></p> <p></p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#iv-recuperations-des-logs-de-connexion","title":"IV - R\u00e9cup\u00e9rations des logs de connexion","text":"<p>Dans le cadre de l\u2019administration et du suivi des acc\u00e8s, la r\u00e9cup\u00e9ration des logs de connexion est une \u00e9tape essentielle. Apache Guacamole enregistre les \u00e9v\u00e9nements li\u00e9s aux connexions utilisateurs, ce qui permet d\u2019assurer une meilleure tra\u00e7abilit\u00e9, de faciliter le diagnostic en cas d\u2019incident et de renforcer la s\u00e9curit\u00e9 de l\u2019infrastructure. Cette section pr\u00e9sente les m\u00e9thodes permettant d\u2019acc\u00e9der et d\u2019exploiter ces journaux.</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#a-sur-linterface-de-la-web-app-de-apache-guacamole","title":"A - Sur l'interface de la Web App de Apache Guacamole :","text":"<p>La web App de Apache Guacamole utilise la base de donn\u00e9es MariaDB pour r\u00e9cup\u00e9rer les informations suivantes.</p> <p>Param\u00e8tres &gt; \u2026</p> <p></p> <p>Param\u00e8tres &gt; Historique</p> <p></p> <p>Voici l\u2019historique de connexion effectuer sur notre serveur Bastion. </p> <p>T\u00e9l\u00e9cherger un fichier de log</p> <p>Il est \u00e9galement possible de t\u00e9l\u00e9cherger les logs en fichier csv. Il suffit de cliquer sur le bouton \"T\u00e9l\u00e9charger\" en haut \u00e0 droite.</p> <p></p> <p>Nous pouvons identifier plusieurs informations importantes concernant la tra\u00e7abilit\u00e9 comme :</p> <ul> <li>L\u2019utilisateur </li> <li>L\u2019heure d\u2019ouverture d\u2019une connexion \u00e0 un serveur </li> <li>La dur\u00e9e de connexion</li> <li>Le nom du serveur cible </li> <li>L\u2019adresse IP du client </li> </ul>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#b-en-ligne-de-commande-sur-notre-serveur-apache-guacamole","title":"B - En ligne de commande sur notre serveur Apache Guacamole :","text":"<p>Connection a MariaDB : <pre><code>sudo mysgul -u root -p guacadb\n</code></pre></p> <p>Puis lancer la commande suivante pour afficher les logs : <pre><code>SELECT user_id, connection_id, start_date, end_date\nFROM guacamole_connection_history\nORDER BY start_date DESC\nLIMIT 10;\n</code></pre></p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#v-annexe","title":"V - Annexe","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#annexe-1","title":"Annexe 1 :","text":"<p>Tomcat9, c\u2019est un petit logiciel qui sert \u00e0 lancer des sites web faits en Java.</p> <p>Dans Guacamole le fichier <code>guacamole.war</code> contient l\u2019interface web (l\u2019\u00e9cran de connexion, le portail). Tomcat9 est l\u00e0 pour ouvrir ce fichier et le rendre accessible dans ton navigateur \u00e0 l\u2019adresse : <code>http://IP_BASTION:8080/guacamole</code></p> <p>En r\u00e9sum\u00e9 : Tomcat9 c'est le programme qui affiche Guacamole dans le navigateur</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#annexe-2-pour-plus-de-securite","title":"Annexe 2 : Pour plus de s\u00e9curit\u00e9","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Le-Bastion/#creer-un-nouveau-compte-admin","title":"Cr\u00e9er un nouveau compte admin","text":"<p>Tout d'abord, nous allons cr\u00e9er un nouveau compte d'administration et supprimer le compte par d\u00e9faut, pour des raisons de s\u00e9curit\u00e9. Notre objectif est le suivant :</p> <ul> <li>Cr\u00e9er un nouveau compte administrateur (avec un nom personnalis\u00e9)</li> <li>Se d\u00e9connecter du compte \"guacadmin\"</li> <li>Se reconnecter avec le nouveau compte administrateur</li> <li>Supprimer le compte \"guacadmin\" par d\u00e9faut (ou \u00e0 minima changer son mot de passe et le d\u00e9sactiver)</li> <li>Pour acc\u00e9der aux param\u00e8tres, il faut cliquer sur le nom d'utilisateur en haut \u00e0 droite puis sur \"Param\u00e8tres\".</li> </ul> <p></p> <p>Ensuite, sur l'onglet \"Utilisateurs\" et sur \"Nouvel utilisateur\".</p> <p></p> <p>Un formulaire s'affiche. Indiquez un nom d'utilisateur, en \u00e9vitant les traditionnels \"Administrateur\", \"Admin\", etc.... Et choisissez un mot de passe robuste. Cochez l'ensemble des permissions pour que cet utilisateur soit administrateur de la plateforme Guacamole.</p> <p></p> <p>M\u00eame si cela ne s'applique pas \u00e0 notre utilisateur actuel, on remarque des options int\u00e9ressantes dans la section \"Restrictions de compte\". On peut limiter l'acc\u00e8s aux sessions uniquement sur certaines plages horaires, mais aussi activer et d\u00e9sactiver le compte \u00e0 une date sp\u00e9cifique. Tr\u00e8s int\u00e9ressant pour donner un acc\u00e8s \u00e0 un prestataire tout en gardant le contr\u00f4le sur les sessions.</p> <p>Ce nouveau compte est cr\u00e9\u00e9, donc suivez les \u00e9tapes \u00e9voqu\u00e9es ci-dessus pour vous d\u00e9barrasser du compte guacadmin. Tout se passe dans les param\u00e8tres puis dans la section \"Utilisateurs\".</p> <p>Groupe avec Guacamole</p> <p>Apache Guacamole permet aussi de cr\u00e9er des groupes pour faciliter la gestion des autorisations.</p> <ol> <li> <p>Tomcat 9 sert d\u2019interm\u00e9diaire entre le navigateur du client et les applications web Java h\u00e9berg\u00e9es sur le serveur.\u00a0\u21a9</p> </li> </ol>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-1/","title":"Situation 1 : phase d\u2019analyse pr\u00e9alable","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-1/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-1/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-1/#1-pourquoi-le-rssi-a-opte-pour-une-solution-utm-plutot-quun-simple-pare-feu-stateful","title":"1. Pourquoi le RSSI a opt\u00e9 pour une solution UTM plut\u00f4t qu\u2019un simple pare-feu stateful ?","text":"<p>Un pare-feu stateful se limite principalement aux couches 3 et 4 du mod\u00e8le OSI. Il inspecte les adresses IP, les ports et l\u2019\u00e9tat des connexions, mais ne va pas plus loin. En revanche, une solution UTM (Unified Threat Management) agit jusqu\u2019\u00e0 la couche 7 (applicative) et int\u00e8gre plusieurs briques de s\u00e9curit\u00e9 en une seule appliance : antivirus, antispam, IDS/IPS, filtrage web et pr\u00e9vention des fuites de donn\u00e9es</p> <p>Cela permet de mieux contrer les menaces modernes (malwares, attaques cibl\u00e9es, ransomwares), avec une administration centralis\u00e9e et plus simple pour le RSSI.</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-1/#2-donner-deux-arguments-en-faveur-dun-boitier-utm-stormshield-par-rapport-a-ceux-proposes-par-des-entreprises-concurrents-telles-que-palo-alto-ou-checkpoint","title":"2. Donner deux arguments en faveur d\u2019un bo\u00eetier UTM Stormshield, par rapport \u00e0 ceux propos\u00e9s par des entreprises concurrents telles que Palo Alto ou checkPoint.","text":"<p>Souverainet\u00e9 num\u00e9rique : Stormshield est une entreprise fran\u00e7aise (filiale d\u2019Airbus), soumise au droit fran\u00e7ais et europ\u00e9en (RGPD, loi informatique et libert\u00e9s). Contrairement \u00e0 certains concurrents am\u00e9ricains, ses solutions ne sont pas soumises \u00e0 l\u2019extraterritorialit\u00e9 du droit US </p> <p>Certification ANSSI : Le pare-feu Stormshield SNS est certifi\u00e9 EAL4+ et qualifi\u00e9 ANSSI niveau standard. Cela garantit un haut niveau de s\u00e9curit\u00e9 valid\u00e9 par un audit officiel, un crit\u00e8re de confiance important pour les OIV et les entreprises sensibles</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/","title":"Situation 2 : Premiers param\u00e9trage d'un pare-feu sur un site de l'entreprise","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/#1-installer-vos-3-vm-sans-les-services-et-parametrer-correctement-leurs-cartes-reseaux","title":"1. Installer vos 3 VM (sans les services) et param\u00e9trer correctement leurs cartes r\u00e9seaux","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/#2-renommer-le-pare-feu-fw-frankfurt","title":"2. Renommer le pare-feu : FW-Frankfurt","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/#3-changement-du-mot-de-passe-conforme-aux-preconisations-de-lanssi","title":"3. Changement du mot de passe conforme aux pr\u00e9conisations de l\u2019ANSSI","text":"<p>Configuration &gt; Syst\u00e8me &gt; Administrateurs</p> <ol> <li>Cliquez sur l\u2019utilisateur (souvent <code>admin</code>).  </li> <li>Cliquez sur Modifier le mot de passe et entrez le nouveau.  </li> <li>Sauvegardez et appliquez.</li> </ol>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/#4-pourquoi-est-il-primordial-que-lensemble-des-pare-feu-de-lentreprise-cub-soit-synchronise-sur-les-serveurs-ntp-de-lentreprise-stormshield","title":"4. Pourquoi est-il primordial que l\u2019ensemble des pare-feu de l\u2019entreprise CUB soit synchronis\u00e9 sur les serveurs NTP de l\u2019entreprise Stormshield","text":"<p>Configuration &gt; Syst\u00e8me &gt; Configuration</p> <p></p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/#5-configurer-les-interfaces-reseaux-de-lappliance-afin-que-cela-correspondent-a-ce-que-vous-avez-defini-precedemment-dans-votre-schema-reseau-logique","title":"5. Configurer les interfaces r\u00e9seaux de l\u2019appliance afin que cela correspondent \u00e0 ce que vous avez d\u00e9fini pr\u00e9c\u00e9demment dans votre sch\u00e9ma r\u00e9seau logique","text":"<p>Il est primordial que les pare-feu CUB soient synchronis\u00e9s avec les serveurs NTP de l\u2019entreprise Stormshield afin de garantir la coh\u00e9rence des journaux, la fiabilit\u00e9 des analyses de s\u00e9curit\u00e9, la validit\u00e9 des m\u00e9canismes cryptographiques et la conformit\u00e9 aux normes de s\u00e9curit\u00e9.</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/#6-dans-le-menu-filtrage-et-nat-appliquer-la-politique-de-filtrage-10-pass-all-afin-deviter-des-blocages-ou-erreurs-lies-a-cette-derniere","title":"6. Dans le menu Filtrage et NAT, appliquer la politique de filtrage (10) Pass All afin d\u2019\u00e9viter des blocages ou erreurs li\u00e9s \u00e0 cette derni\u00e8re","text":"<p>Configuration &gt; R\u00e9seau &gt; Interfaces</p> <p></p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-2/#7-dans-le-menu-filtrage-et-nat-appliquer-la-politique-de-filtrage-10-pass-all-afin-deviter-des-blocages-ou-erreurs-lies-a-cette-derniere","title":"7. Dans le menu Filtrage et NAT, appliquer la politique de filtrage (10) Pass All afin d\u2019\u00e9viter des blocages ou erreurs li\u00e9s \u00e0 cette derni\u00e8re","text":"<p>Configuration &gt; Politique de s\u00e9curit\u00e9 &gt; Filtrage et NAT</p> <p></p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-3/","title":"Situation 3 : Routage et NAT","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-3/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-3/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-3/#1-rediger-la-table-de-routage-du-pare-feu-stormshield-de-lagence-frankfurt","title":"1. R\u00e9diger la table de routage du pare-feu Stormshield de l\u2019agence Frankfurt","text":"<p>FW</p> Destination Masque Passerelle Interface Type 192.36.253.0 /24 192.36.253.60 192.36.253.60 C 192.36.6.0 /24 192.36.6.254 192.36.6.254 C 192.168.66.248 /28 192.168.66.254 192.168.66.254 C 192.168.6.0 /24 192.168.66.253 192.168.66.254 S 0.0.0.0 /0 192.36.253.254 192.36.253.60 S <p>LAYER 3</p> Destination Masque Passerelle Interface Type 192.168.6.0 /25 192.168.6.126 192.168.6.126 C 192.168.66.248 /28 192.168.66.253 192.168.66.253 C 192.168.6.128 /26 192.168.6.190 192.168.6.190 C 192.168.6.192 /28 192.168.66.206 192.168.66.206 S 0.0.0.0 /0 192.168.66.254 192.168.66.253 S <p>Routage NAT</p> Avant translation Apr\u00e8s translation Ip source Port Src IP dst Port dst Ip source Port Src IP dst Port dst 192.168.6.0 /24 * * * 192.36.253.60 /24 * * *"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-3/#2-determiner-quelle-adresse-ip-du-wan-doit-servir-de-passerelle-pour-aller-sur-internet-puis-creer-un-objet-reseau-afin-que-cette-adresse-ip-soit-representee-dans-linterface-dadministration","title":"2. D\u00e9terminer quelle adresse IP du WAN doit servir de passerelle pour aller sur Internet ? Puis cr\u00e9er un objet r\u00e9seau afin que cette adresse IP soit repr\u00e9sent\u00e9e dans l'interface d'administration.","text":"<p>Configuration &gt; Objets &gt; R\u00e9seau</p> <p>Adresse du WAN : 192.36.253.254</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-3/#3-utiliser-cet-objet-afin-de-pouvoir-implementer-la-table-de-routage-sur-votre-pare-feu","title":"3. Utiliser cet objet afin de pouvoir impl\u00e9menter la table de routage sur votre pare-feu.","text":"<p>Configuration &gt; R\u00e9seau &gt; Routage</p> <p></p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-3/#4-proposer-et-parametrer-une-solution-technique-permettant-aux-adresses-ip-privees-de-votre-site-de-pouvoir-communiquer-sur-le-reseau-wan-public-et-internet","title":"4. Proposer et param\u00e9trer une solution technique permettant aux adresses IP priv\u00e9es de votre site de pouvoir communiquer sur le r\u00e9seau WAN public et Internet.","text":"<p>Afin de permettre aux adresses IP priv\u00e9es de notre site de pouvoir communiquer sur le r\u00e9seau WAN public et internet il faut faire du routage NAT pour que l\u2019IP du LAN sortent avec l\u2019IP publique du WAN.</p> <p>Configuration &gt; Politique de s\u00e9curit\u00e9 &gt; Filtrage et NAT</p> <p></p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-3/#5-peut-on-joindre-le-pare-feu-general-cub-puis-les-serveurs-presents-dans-sa-dmz-proposer-une-analyse-des-resultats-obtenus","title":"5. Peut-on joindre le pare-feu g\u00e9n\u00e9ral CUB puis les serveurs pr\u00e9sents dans sa DMZ. Proposer une analyse des r\u00e9sultats obtenus.","text":"<p>Information</p> <p>!! Impossible de finir la situation car il y a un probl\u00e8me sur nutanix !! </p> <p>!! Impossible de positionner les VM dans DMZ !!</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/","title":"Situation 4 : Crypthographie","text":""},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#prerequis","title":"Pr\u00e9requis","text":"<p>Ducumentation en ligne : https://cubdocumentation.sioplc.fr </p> Service Nombre d\u2019h\u00f4tes Adresse r\u00e9seau Masque de sous-r\u00e9seau Adresse de diffusion Description VLAN Production 120 192.168.6.0 255.255.255.128 192.168.6.127 VLAN 56 Client 1 32 192.168.6.128 255.255.255.192 192.168.6.191 VLAN 10 Administration syst\u00e8mes et r\u00e9seaux 6 192.168.6.192 255.255.255.240 192.168.6.207 VLAN 20"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#packet-tracert-agence-frankfurt","title":"Packet tracert - Agence Frankfurt","text":"\ud83d\udd17 Cliquer pour t\u00e9l\u00e9cherger le paket tracert"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#1-demontrer-le-respect-des-criteres-de-securite-des-protocoles-dadministration-securisees-a-distance-rdp-et-ssh","title":"1. D\u00e9montrer le respect des crit\u00e8res de s\u00e9curit\u00e9 des protocoles d\u2019administration s\u00e9curis\u00e9es \u00e0 distance RDP et SSH ?","text":"<p>SSH : SSH chiffre les communications avec des algorithmes sym\u00e9triques (AES) apr\u00e8s un \u00e9change de cl\u00e9s s\u00e9curis\u00e9. L\u2019int\u00e9grit\u00e9 est assur\u00e9e par des HMAC ou modes AEAD. L\u2019authentification repose sur des cl\u00e9s publiques ou mots de passe, garantissant l\u2019identit\u00e9.</p> <p>RDP : RDP s\u2019appuie sur TLS pour chiffrer les flux (AES) et garantir la confidentialit\u00e9. L\u2019int\u00e9grit\u00e9 est assur\u00e9e par les MAC/AEAD int\u00e9gr\u00e9s \u00e0 TLS. L\u2019authentification s\u2019effectue par certificats, mots de passe ou Kerberos, assurant la provenance. Avec certificats ou cartes \u00e0 puce, les actions sont tra\u00e7ables \u00e0 une identit\u00e9 \u2192 non-r\u00e9pudiation.</p> <p>R\u00e9sum\u00e9 : SSH et RDP sont deux protocoles s\u00e9curis\u00e9s d\u2019administration \u00e0 distance qui respectent les crit\u00e8res de s\u00e9curit\u00e9 de la cryptographie. SSH utilise un \u00e9change de cl\u00e9s puis du chiffrement (AES/ChaCha20), des HMAC pour l\u2019int\u00e9grit\u00e9 et l\u2019authentification par cl\u00e9 publique ou mot de passe. RDP repose sur TLS pour le chiffrement et l\u2019int\u00e9grit\u00e9, avec authentification par certificats, mot de passe ou Kerberos. Dans les deux cas, la confidentialit\u00e9, l\u2019int\u00e9grit\u00e9, l\u2019authentification et la non-r\u00e9pudiation sont assur\u00e9es.</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#2-verifier-en-prouvant-lintegrite-de-lidentite-des-materiels-serveurs-et-element-actifs-lors-dune-liaison-securisee-ssh","title":"2. V\u00e9rifier en prouvant l\u2019int\u00e9grit\u00e9 de l\u2019identit\u00e9 des mat\u00e9riels (serveurs et \u00e9l\u00e9ment actifs) lors d\u2019une liaison s\u00e9curis\u00e9e SSH","text":"<p>Se connecter au switch en SSH, puis faire \u00ab open \u00bb et le message suivant s\u2019affiche.\u2003</p> <p></p> <p>Cliquer sur \u201cMore info...\u201d</p> <p></p> <p>Votre cl\u00e9 publique s\u2019affiche :</p> <p></p> <p>Maintenant il faut comparer la cl\u00e9 que vous avez ci-dessus et la cl\u00e9 que vous avez sur votre switch. Si c\u2019est la m\u00eame c\u2019est OK ! </p> <p><pre><code>show ip ssh\n</code></pre> </p> <p>Les cl\u00e9s sont bien les m\u00eame alors vous pouvez vous connecter en SSH.</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#3-preciser-lalgorithme-de-chiffrement-utilise-par-le-serveur-ssh","title":"3. Pr\u00e9ciser l\u2019algorithme de chiffrement utilis\u00e9 par le serveur SSH","text":"<p>Le serveur SSH utilise \u00ab RSA \u00bb comme algorithme de chiffrement </p> <p>\u00c9l\u00e9ment r\u00e9cup\u00e9rer sur le screen au dessus</p> <p>SHA256 fingerprint: ssh-rsa 2048 SHA256:XywKrDQyb X5gW0klL1sPv4zF0Ak7mEAIXYsKMYQdA</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#4-schematiser-a-laide-dun-diagramme-de-sequence-les-echanges-entre-le-client-et-le-serveur-lors-dune-connexion-ssh","title":"4. Sch\u00e9matiser \u00e0 l\u2019aide d\u2019un diagramme de s\u00e9quence les \u00e9changes entre le client et le serveur lors d\u2019une connexion SSH.","text":"<p>Client : on est dans putty, on se connecte au serveur SSH  Serveur : le serveur nous communique une cl\u00e9 publique et nous demande si on accepte ou pas la cl\u00e9   Client : utilisation de la cl\u00e9 publique par le client pour acc\u00e9der au serveur SSH  Serveur : le serveur nous autorise l\u2019acc\u00e8s au serveur SSH</p> <p>(La cl\u00e9 publique nous permet de chiffrer les informations communiquer avec le switch, et seulement le Serveur peut d\u00e9chiffrer les information gr\u00e2ce \u00e0 sa cl\u00e9 priv\u00e9e.)</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#5-connexion-en-https-sur-linterface-dadministration-du-pare-feu-relever-les-elements-presents-dans-le-certificat-tlsssl","title":"5. Connexion en HTTPS sur l\u2019interface d\u2019administration du pare-feu. Relever les \u00e9l\u00e9ments pr\u00e9sents dans le certificat TLS/SSL","text":"<p>Cliqu\u00e9 sur le cadenas</p> <p></p> <p>Faire afficher le certificat</p> <p></p> <p>Puis afficher le certificat :</p> <p> </p> <p>Il y a de nombreuses informations importantes comme : </p> <ul> <li>Information sur la cl\u00e9 publique </li> <li>CA : Le contrat </li> <li>Empreinte num\u00e9rique </li> <li>etc</li> </ul>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#6-preciser-pourquoi-lors-de-la-premiere-connexion-a-linterface-dadministration-du-pare-feu-stormshield-un-message-dalerte-est-stipule","title":"6. Pr\u00e9ciser pourquoi lors de la premi\u00e8re connexion \u00e0 l\u2019interface d\u2019administration du pare-feu Stormshield, un message d\u2019alerte est stipul\u00e9","text":"<p>Le message d\u2019alerte : </p> <p></p> <p>Le message d\u2019alerte appara\u00eet pour sensibiliser la personne qui se rend sur ce site, au fait que la configuration initiale (mot de passe, certificat, r\u00e8gles) n\u2019est pas s\u00e9curis\u00e9e.</p> <p>En claire : Le message d\u2019alerte lors de la premi\u00e8re connexion signale principalement que la communication HTTPS repose sur un certificat auto-sign\u00e9 et que les identifiants par d\u00e9faut doivent \u00eatre chang\u00e9s pour \u00e9viter toute faille de s\u00e9curit\u00e9</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#7-apres-avoir-rappele-le-role-dune-autorite-de-certification-preciser-la-difference-entre-une-autorite-de-certification-reconnue-et-non-reconnue-quels-sont-les-avantages-et-les-inconvenients-de-lune-et-lautre","title":"7. Apr\u00e8s avoir rappel\u00e9 le r\u00f4le d\u2019une autorit\u00e9 de certification, pr\u00e9ciser la diff\u00e9rence entre une autorit\u00e9 de certification reconnue et non-reconnue. Quels sont les avantages et les inconv\u00e9nients de l\u2019une et l\u2019autre ?","text":"<p>R\u00f4le : Une autorit\u00e9 de certification est un organisme tiers de confiance charg\u00e9 de d\u00e9livrer des certificats num\u00e9riques. Cela permet de garantir l\u2019authenticit\u00e9 d\u2019un site, assurer la confidentialit\u00e9 des \u00e9changes gr\u00e2ce au chiffrement et v\u00e9rifier l\u2019int\u00e9grit\u00e9 des donn\u00e9es transmises.</p>"},{"location":"documentation/Bloc3-Cybers%C3%A9curit%C3%A9/Situation-4/#difference","title":"Diff\u00e9rence","text":"<p>Une autorit\u00e9 de certification non-reconnue c\u2019est un certificat qui est auto-sign\u00e9, ou d\u00e9livr\u00e9 par une CA interne \u00e0 une entreprise.</p> <p>Avantage : flexible  Inconv\u00e9nient : g\u00e9n\u00e8re des alertes de s\u00e9curit\u00e9 et demande une configuration manuelle </p> <p>Une autorit\u00e9 de certification reconnue est un organisme dont les certificats racine sont d\u00e9j\u00e0 int\u00e9gr\u00e9s dans les navigateurs, les syst\u00e8mes d\u2019exploitation et les appareils. (exemple : DigiCert, GlobalSign, Let\u2019s Encrypt).</p> <p>Les certificats qu\u2019elle d\u00e9livre sont automatiquement consid\u00e9r\u00e9s comme fiables.</p> <p>Avantage : confiance universelle   Inconv\u00e9nient : co\u00fbt/d\u00e9pendance</p>"}]}